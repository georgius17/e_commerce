{"version":3,"sources":["Assets/Images/header.jpg","Assets/Images/bag_icon.jpg","Translations/Resources.ts","Hooks/useFieldError.ts","Components/Inputs/EmailInput.tsx","Components/Inputs/PasswordInput.tsx","Components/Auth/Login/LoginForm.tsx","State/Auth/AuthReducer.ts","Components/Auth/Login/LoginPage.tsx","Routes/AuthenticatedRoute.tsx","Components/Layout/AppBar.tsx","Components/Layout/Menu.tsx","Components/Layout/AuthenticatedLayout.tsx","State/Users/UserReducer.ts","Components/Users/UsersTable.tsx","Components/Users/UsersPage.tsx","Components/Users/UserLogout.tsx","State/Products/ProductsReducer.ts","Components/Products/ProductEdit.tsx","Components/Products/ProductRow.tsx","Components/Products/ProductsTable.tsx","State/Categories/CategoriesReducer.tsx","Components/Products/ProductsManagePage.tsx","State/Orders/OrdersReducer.tsx","Components/Products/ProductItem.tsx","Components/Products/ProductsPage.tsx","Components/Users/UserDetailPage.tsx","Components/Orders/OrdersTable.tsx","Components/Orders/OrdersPage.tsx","Components/Layout/Layout.tsx","Components/Routes/UnstyledLink.ts","Components/Error/Error404Page.tsx","Routes/Routes.tsx","Api/Api.ts","State/Auth/AuthSaga.ts","State/Users/UserSaga.ts","ErrorService.tsx","State/Products/ProductsSaga.ts","State/Orders/OrdersSaga.tsx","State/Categories/CategoriesSaga.tsx","State/Store.ts","Components/Error/ApplicationError.tsx","Components/Error/GlobalErrorHandler.tsx","App.tsx","Translations/CzechResourcesDictionary.ts","serviceWorker.ts","index.tsx"],"names":["module","exports","Resources","createProxy","getResourcePath","proxy","path","getPath","length","toString","slice","join","useResource","i18Translation","useTranslation","t","resourcePath","useFieldError","props","hasError","fieldError","errorMessage","message","undefined","originalProps","omit","EmailInput","muiProps","TextField","variant","margin","required","fullWidth","id","name","autoComplete","error","helperText","PasswordInput","type","useStyles","makeStyles","theme","form","width","marginTop","spacing","submit","serverError","color","red","LoginForm","classes","isLoading","validationSchema","yup","login","defined","Validation","Required","email","InvalidEmail","password","useForm","mode","register","handleSubmit","errors","setError","React","className","onSubmit","data","autoFocus","label","Login","Label","inputRef","disabled","Password","Typography","Button","isLogin","resetUser","createAction","loginUserAsync","createAsyncAction","signUpUserAsync","authReducer","createReducer","user","errorCode","handleAction","request","state","success","action","console","log","payload","firstName","displayName","lastName","role","failure","root","height","image","backgroundImage","backgroundRepeat","backgroundColor","palette","grey","backgroundSize","backgroundPosition","paper","display","flexDirection","alignItems","avatar","secondary","main","LoginPage","_","from","useLocation","pathname","Routes","Products","setIsLogin","dispatch","useDispatch","translateError","parentObject","fallbackProperty","code","newCode","i18next","exists","useServerError","Error","General","useSelector","e","auth","history","useHistory","replace","Grid","justify","container","component","item","xs","sm","md","Paper","elevation","square","Avatar","FormTitle","FormControlLabel","control","Switch","onChange","AuthenticatedRoute","children","rest","isAuthenticated","render","location","to","AppBar","drawerWidth","createStyles","position","menuButton","marginRight","title","flexGrow","cursor","header","headerImg","borderBottom","justifyContent","toolbar","zIndex","logo","maxWidth","left","top","titleName","fontSize","fontWeight","isMenuOpen","setIsMenuOpen","Toolbar","IconButton","Users","onClick","edge","aria-label","mixins","link","textDecoration","menu","right","menuUser","Menu","Divider","List","ListItem","button","ListItemIcon","ListItemText","primary","MenuItems","ManageProducts","LogOut","Orders","AdminOrders","userID","UserOrders","minHeight","drawer","breakpoints","up","flexShrink","drawerPaper","content","padding","footer","bottom","AuthenticatedLayout","useTheme","Date","getFullYear","getUsersAsync","getUsersDetailAsync","deleteUsersAsync","userReducer","users","userDetail","table","minWidth","tableRow","border","lineHeight","UsersTable","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","map","key","scope","loginUser","onLogin","UsersPage","Title","UserLogout","getProductsAsync","postProductAsync","deleteProductAsync","editProductAsync","findProductsAsync","buyProductSync","productsReducer","products","newProducts","newProduct","productID","push","filter","product","index","findIndex","i","quantity","newForm","flexWrap","category","priceDiscount","borderRadius","buttonSuccess","redBorder","buttonCancel","borderColor","fileInput","ProductEdit","useState","isPicture","setIsPicture","isDiscount","setIsDiscount","isNew","setIsNew","useEffect","discountPrice","handleSubmitData","createdBy","updatedBy","isDeleted","productName","price","productPrice","productQuantity","productPriceDiscount","categoryID","Number","productCategory","imageURL","formData","FormData","Object","entries","val","append","productPicture","min","positive","integer","size","as","defaultValue","htmlFor","accept","ref","InputProps","endAdornment","InputAdornment","Select","categories","C","MenuItem","value","Checkbox","checked","onCancel","API_URL","process","REACT_APP_API_URL","editCell","picture","orangeIcon","transform","prices","lineThrough","ProductRow","edit","colSpan","onEditCancel","c","ca","src","onEditStart","onDelete","tableLayout","boxShadow","addIcon","float","ProductsTable","isAddForm","setIsAddForm","editList","setEditList","indexOf","getCategoriesAsync","categoriesReducer","newCategories","newCategory","ProductsManagePage","getOrdersAsync","postOrderAsync","deleteOrderAsync","ordersReducer","orders","order","orderId","productItem","maxHeight","whiteSpace","stockSection","marginLeft","buySection","borderTop","buttonSection","discountIcon","newIcon","topAdd","uppercase","letterSpacing","ProductItem","productImg","toFixed","formatDiscount","query","productId","updatedProduct","postOrderHandler","overflowX","gap","gridTemplateColumns","searchContainer","input","textAlign","clearButton","searchBar","categoriesContainer","autocomplete","overflow","listStyleType","list","autoSearchDiv","ProductsPage","searchString","setSearchString","categoriesFilter","setCategoriesFilter","accents","require","searchProducts","target","onKeyDown","handleKeyDown","remove","toLowerCase","includes","charIndex","lengthIndex","UserDetailPage","params","useRouteMatch","tableHeadRow","tableBodyCell","paddingBottom","bold","priceColumn","OrdersTable","moment","deleteHandler","dateCreated","format","diff","deleteIcon","reduce","accumulator","current","dateBar","marginBottom","dateControl","OrdersPage","dateFrom","dateTo","allOrders","searchDate","setSearchDate","dateSubmitHandler","dateInput","startOf","admin","AdminTitle","UserTitle","InputLabel","InputLabelProps","shrink","createMuiTheme","overrides","MuiCssBaseline","html","WebkitFontSmoothing","body","light","dark","contrastText","background","default","Layout","ThemeProvider","CssBaseline","UnstyledLink","styled","Link","StyledPage","div","StyledIcon","NotInterestedIcon","Error404Page","Errors","Error404","Subtitle","startIcon","Home","manageProducts","UserDetail","userLogout","ordersAdmin","ordersUser","exact","CONFIG","jwtKey","onResponse","fetchJson","a","fetch","res","json","response","status","errorResponse","updateHeaders","headers","has","apiPost","url","raw","JSON","stringify","method","redirect","apiGet","paramsObject","queryString","maybeQueryString","requestOptions","apiPut","apiDelete","Role","AuthError","UserOriginDto","FIREBASE_URL","postAuthLogin","requestContract","Headers","apikey","postAuthSignUp","getCategoriesList","postLogError","deleteOrdersId","localStorage","getItem","postOrders","postOrdersList","deleteProductsId","getProductsList","postProductsSearch","postProducts","putProducts","getUsersList","getUsersId","deleteUsersId","loginUserSaga","signUpUser","signUpUserSaga","call","setItem","localId","put","takeLatest","getType","idToken","getUsers","getUsersSaga","getUserDetail","getUserDetailSaga","deleteUser","deleteUserSaga","logStorage","window","logToApiDebounced","debounce","applicationErrorStack","webLogRequests","toISOString","logError","additionalInfo","errorLog","stack","reduxState","applicationStore","getState","getProducts","getProductsSaga","postProduct","postProductSaga","updateProductSaga","deleteProduct","deleteProductSaga","editProduct","editProductSaga","findProducts","findProductsSaga","getOrders","getOrdersSaga","postOrder","postOrderSaga","deleteOrder","deleteOrderSaga","newOrders","ord","newOrder","getCategories","getCategoriesSaga","rootSaga","authPersistConfig","storage","blacklist","combinedReducer","combineReducers","persistReducer","persistConfig","whitelist","persistedReducer","clear","reload","sagaMiddleware","createSagaMiddleware","onError","errorInfo","middlewares","store","createStore","composeWithDevTools","applyMiddleware","all","run","ApplicationError","href","GlobalErrorHandler","info","this","setState","i18n","use","initReactI18next","init","resources","cs","Submit","InvalidLogin","Dashboard","Logout","lng","fallbackLng","interpolation","escapeValue","App","configuration","appStore","persistor","persistStore","useApplicationStore","r","loading","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","addEventListener","event"],"mappings":"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","file":"static/js/main.afa1dbf3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/header.fab41997.jpg\";","module.exports = __webpack_public_path__ + \"static/media/bag_icon.7bc45d65.jpg\";","import { ObjPathProxy, createProxy, getPath } from \"ts-object-path\";\r\nimport i18next, { ResourceLanguage } from \"i18next\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport interface ResourceDictionary extends ResourceLanguage {\r\n  Routes: {\r\n    Login: string;\r\n    Users: string;\r\n    UserDetail: string;\r\n    Products: string;\r\n    LogOut: string;\r\n    Orders: string;\r\n  };\r\n  Errors: {\r\n    ApplicationError: {\r\n      Title: string;\r\n      Subtitle: string;\r\n      Home: string;\r\n    };\r\n    Error404: {\r\n      Subtitle: string;\r\n      Home: string;\r\n    };\r\n  };\r\n  Login: {\r\n    FormTitle: string;\r\n    Login: {\r\n      Label: string;\r\n    };\r\n    Password: {\r\n      Label: string;\r\n    };\r\n    Submit: string;\r\n    Error: {\r\n      General: string;\r\n      InvalidLogin: string;\r\n    };\r\n  };\r\n  Dashboard: {\r\n    Title: string;\r\n    Logout: string;\r\n  };\r\n  Validation: {\r\n    Required: string;\r\n    InvalidEmail: string;\r\n  };\r\n  MenuItems: {\r\n    Login: string;\r\n    Users: string;\r\n    Products: string;\r\n    ManageProducts: string;\r\n    LogOut: string;\r\n    UserOrders: string;\r\n    AdminOrders: string;\r\n  };\r\n  Users: {\r\n    Title: string;\r\n  };\r\n  Products: {\r\n    Title: string;\r\n  };\r\n  Orders: {\r\n    UserTitle: string;\r\n    AdminTitle: string;\r\n  }\r\n}\r\n\r\nexport const Resources = createProxy<ResourceDictionary>();\r\n\r\ntype ProxyProperty = Readonly<{\r\n  path: string;\r\n}>;\r\n\r\nexport function getResourcePath<TRoot, T>(\r\n  proxy: ObjPathProxy<ResourceDictionary, string>,\r\n): string {\r\n  const path = getPath(proxy);\r\n\r\n  if (!path || path.length === 0) return \"\";\r\n  if (path.length === 1) return path[0].toString();\r\n  return `${path[0].toString()}:${path.slice(1).join(\".\")}`;\r\n}\r\n\r\nexport function useResource() {\r\n  const { t: i18Translation } = useTranslation();\r\n\r\n  return {\r\n    t: (resourcePath: ObjPathProxy<ResourceDictionary, string>) =>\r\n      i18Translation(getResourcePath(resourcePath)),\r\n  };\r\n}\r\n\r\nexport function useServerError<TRoot, T>(\r\n  parentObject: ObjPathProxy<ResourceDictionary, object>,\r\n  fallbackProperty: ObjPathProxy<ResourceDictionary, string>,\r\n) {\r\n  const { t } = useResource();\r\n  return {\r\n    translateError: (code: string | null | undefined) => {\r\n      if (!code) {\r\n        return null;\r\n      }\r\n\r\n      const newCode = `${getResourcePath(parentObject as any)}.${code}`;\r\n\r\n      const resource = i18next.exists(newCode)\r\n        ? i18next.t(newCode)\r\n        : t(fallbackProperty);\r\n\r\n      return resource;\r\n    },\r\n  };\r\n}\r\n","import { FieldError } from \"react-hook-form\";\r\nimport { omit } from \"lodash\";\r\n\r\nexport type FieldErrorProps = {\r\n  fieldError: FieldError | undefined;\r\n};\r\n\r\nexport function useFieldError(props: FieldErrorProps) {\r\n  const hasError = !!props.fieldError;\r\n  const errorMessage = hasError\r\n    ? props.fieldError?.message?.toString()\r\n    : undefined;\r\n\r\n  const originalProps = omit(props, \"fieldError\");\r\n\r\n  return {\r\n    hasError,\r\n    errorMessage,\r\n    originalProps,\r\n  };\r\n}\r\n","import * as React from \"react\";\r\nimport TextField, { TextFieldProps } from \"@material-ui/core/TextField\";\r\nimport { useFieldError, FieldErrorProps } from \"Hooks/useFieldError\";\r\n\r\ntype Props = TextFieldProps & FieldErrorProps;\r\n\r\nconst EmailInput: React.FunctionComponent<Props> = props => {\r\n  const { hasError, errorMessage, originalProps: muiProps } = useFieldError(\r\n    props,\r\n  );\r\n\r\n  return (\r\n    <TextField\r\n      variant={\"outlined\" as any}\r\n      margin=\"normal\"\r\n      required\r\n      fullWidth\r\n      id=\"email\"\r\n      name=\"email\"\r\n      autoComplete=\"email\"\r\n      error={hasError}\r\n      helperText={errorMessage}\r\n      {...muiProps}\r\n    />\r\n  );\r\n};\r\n\r\nexport { EmailInput };\r\n","import * as React from \"react\";\r\nimport TextField, { TextFieldProps } from \"@material-ui/core/TextField\";\r\nimport { FieldErrorProps, useFieldError } from \"Hooks/useFieldError\";\r\n\r\ntype Props = TextFieldProps & FieldErrorProps;\r\n\r\nconst PasswordInput: React.FunctionComponent<Props> = props => {\r\n  const { hasError, errorMessage, originalProps: muiProps } = useFieldError(\r\n    props,\r\n  );\r\n\r\n  return (\r\n    <TextField\r\n      variant={\"outlined\" as any}\r\n      margin=\"normal\"\r\n      required\r\n      fullWidth\r\n      name=\"password\"\r\n      type=\"password\"\r\n      id=\"password\"\r\n      autoComplete=\"current-password\"\r\n      error={hasError}\r\n      helperText={errorMessage}\r\n      {...muiProps}\r\n    />\r\n  );\r\n};\r\n\r\nexport { PasswordInput };\r\n","import * as React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Resources, useResource } from \"Translations/Resources\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { EmailInput } from \"Components/Inputs/EmailInput\";\r\nimport { PasswordInput } from \"Components/Inputs/PasswordInput\";\r\nimport { nameof } from \"Utils/ObjectUtils\";\r\nimport * as yup from \"yup\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport red from \"@material-ui/core/colors/red\";\r\n\r\ntype Props = {\r\n  isLoading: boolean;\r\n  serverError: string | null;\r\n  onSubmit: (formData: FormData) => void;\r\n  isLogin: boolean;\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  form: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  serverError: {\r\n    color: red[500],\r\n  },\r\n}));\r\n\r\nexport type FormData = {\r\n  login: string;\r\n  password: string;\r\n};\r\n\r\nconst LoginForm: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles();\r\n  const { t } = useResource();\r\n\r\n  const { isLoading, serverError } = props;\r\n  const validationSchema: yup.ObjectSchema<FormData> = yup\r\n    .object({\r\n      login: yup\r\n        .string()\r\n        .defined()\r\n        .required(t(Resources.Validation.Required))\r\n        .email(t(Resources.Validation.InvalidEmail)),\r\n      password: yup\r\n        .string()\r\n        .defined()\r\n        .required(t(Resources.Validation.Required)),\r\n    })\r\n    .defined();\r\n\r\n  const { register, handleSubmit, errors, setError } = useForm<FormData>({\r\n    validationSchema,\r\n    mode: \"onChange\",\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (serverError) {\r\n      setError(\"login\", \"\");\r\n    }\r\n  }, [serverError, setError]);\r\n\r\n  const onSubmit = (data: FormData) => {\r\n    props.onSubmit(data);\r\n  };\r\n\r\n  return (\r\n    <form className={classes.form} onSubmit={handleSubmit(onSubmit)}>\r\n      <EmailInput\r\n        autoFocus\r\n        name={nameof<FormData>(\"login\")}\r\n        label={t(Resources.Login.Login.Label)}\r\n        inputRef={register}\r\n        fieldError={errors.login}\r\n        disabled={isLoading}\r\n      />\r\n      <PasswordInput\r\n        name={nameof<FormData>(\"password\")}\r\n        label={t(Resources.Login.Password.Label)}\r\n        inputRef={register}\r\n        fieldError={errors.login}\r\n        disabled={isLoading}\r\n      />\r\n      <Typography variant=\"subtitle1\" className={classes.serverError}>\r\n        {serverError}\r\n      </Typography>\r\n      <Button\r\n        type=\"submit\"\r\n        fullWidth\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        className={classes.submit}\r\n        disabled={isLoading}\r\n      >\r\n      {props.isLogin ? \"Přihlásit\" : \"Registrovat\"}\r\n      </Button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport { LoginForm };\r\n","import {\r\n  createReducer,\r\n  ActionType,\r\n  createAction,\r\n  createAsyncAction,\r\n} from \"typesafe-actions\";\r\nimport { AuthResult, AuthRequest } from \"Api/Api\";\r\n\r\nexport type AppUser = {\r\n  email: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  role: string;\r\n};\r\n\r\nexport type AuthState = {\r\n  user: AppUser | null;\r\n  errorCode: string | null;\r\n  isLoading: boolean;\r\n};\r\n\r\nexport const resetUser = createAction(\"@auth/RESET\")<void>();\r\n\r\nexport const loginUserAsync = createAsyncAction(\r\n  \"@auth/LOGIN_REQUEST\",\r\n  \"@auth/LOGIN_SUCCESS\",\r\n  \"@auth/LOGIN_FAILURE\",\r\n)<AuthRequest, AuthResult, Error>();\r\n\r\nexport const signUpUserAsync = createAsyncAction(\r\n  \"@auth/SIGNUP_REQUEST\",\r\n  \"@auth/SIGNUP_SUCCESS\",\r\n  \"@auth/SIGNUP_FAILURE\",\r\n)<AuthRequest, AuthResult, Error>();\r\n\r\nexport type AuthAction =\r\n  | ActionType<typeof loginUserAsync>\r\n  | ActionType<typeof signUpUserAsync>\r\n  | ActionType<typeof resetUser>;\r\n\r\nexport const authReducer = createReducer<AuthState, AuthAction>({\r\n  user: null,\r\n  errorCode: null,\r\n  isLoading: false,\r\n})\r\n  .handleAction(loginUserAsync.request, state => {\r\n    return { ...state, isLoading: true };\r\n  })\r\n  .handleAction(loginUserAsync.success, (state, action) => {\r\n    console.log(action.payload);\r\n    //if (action.payload.isSuccessful) {\r\n      const user: AppUser = {\r\n        email: action.payload.email,\r\n        firstName: action.payload.displayName,\r\n        lastName: \"\",\r\n        role: \"Admin\"\r\n      };\r\n\r\n      return { ...state, user, errorCode: null, isLoading: false };\r\n  })\r\n  .handleAction(loginUserAsync.failure, (state, action) => {\r\n    return {\r\n      ...state,\r\n      errorCode: action.payload.message,\r\n      isLoading: false,\r\n    };\r\n  })\r\n  .handleAction(resetUser, state => {\r\n    return { ...state, user: null };\r\n  })\r\n  .handleAction(signUpUserAsync.request, state => {\r\n    return { ...state, isLoading: true };\r\n  })\r\n  .handleAction(signUpUserAsync.success, (state, action) => {\r\n    console.log(action.payload);\r\n    //if (action.payload.isSuccessful) {\r\n      const user: AppUser = {\r\n        email: action.payload.email,\r\n        firstName: action.payload.displayName,\r\n        lastName: \"\",\r\n        role: \"admin\"\r\n      };\r\n\r\n      return { ...state, user, errorCode: null, isLoading: false };\r\n  })\r\n  .handleAction(signUpUserAsync.failure, (state, action) => {\r\n    return {\r\n      ...state,\r\n      errorCode: action.payload.message,\r\n      isLoading: false,\r\n    };\r\n  })\r\n","import * as React from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Resources, useResource, useServerError } from \"Translations/Resources\";\r\nimport { LoginForm, FormData } from \"./LoginForm\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loginUserAsync, signUpUserAsync } from \"State/Auth/AuthReducer\";\r\nimport { RootStateType } from \"State/Store\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  image: {\r\n    backgroundImage: \"url(https://source.unsplash.com/featured/?finances)\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundColor:\r\n      theme.palette.type === \"light\"\r\n        ? theme.palette.grey[50]\r\n        : theme.palette.grey[900],\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  paper: {\r\n    margin: theme.spacing(8, 4),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n}));\r\n\r\nconst LoginPage: React.FunctionComponent = _ => {\r\n  const { t } = useResource();\r\n  const classes = useStyles();\r\n  const location = useLocation<{ from: string }>();\r\n  const { from } = location.state || {\r\n    from: { pathname: `/${t(Resources.Routes.Products)}` },\r\n  };\r\n  const [isLogin, setIsLogin] = React.useState(true);\r\n\r\n  const dispatch = useDispatch();\r\n  const { translateError } = useServerError(\r\n    Resources.Login.Error,\r\n    Resources.Login.Error.General,\r\n  );\r\n  const { isLoading, user, errorCode } = useSelector(\r\n    (e: RootStateType) => e.auth,\r\n  );\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    if (!isLoading && !!user) {\r\n      history.replace(from);\r\n    }\r\n  }, [isLoading, user, t, history, from]);\r\n\r\n  const onSubmit = ({ login, password }: FormData) => {\r\n    if (isLogin) {\r\n      dispatch(loginUserAsync.request({ login, password }));\r\n    } else {\r\n      dispatch(signUpUserAsync.request({ login, password }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid justify=\"center\" container component=\"main\" className={classes.root}>\r\n      \r\n      <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\r\n        <div className={classes.paper}>\r\n          <Avatar className={classes.avatar}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            {t(Resources.Login.FormTitle)}{\" \"}\r\n          </Typography>\r\n          <FormControlLabel\r\n        control={\r\n          <Switch\r\n            onChange={() => setIsLogin(!isLogin)}\r\n            name=\"checkedB\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label={isLogin ? \"Přihlášení\" : \"Registrace\"}\r\n      />\r\n          <LoginForm\r\n            serverError={translateError(errorCode)}\r\n            isLoading={isLoading}\r\n            onSubmit={onSubmit}\r\n            isLogin={isLogin}\r\n          />\r\n        </div>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport { LoginPage };\r\n","import * as React from \"react\";\r\nimport { Redirect, Route, RouteProps } from \"react-router\";\r\nimport { useResource, Resources } from \"Translations/Resources\";\r\nimport { AppUser } from \"State/Auth/AuthReducer\";\r\n\r\ninterface AuhorizedRouteProps extends RouteProps {\r\n  user: AppUser | null;\r\n}\r\n\r\nconst AuthenticatedRoute: React.FunctionComponent<AuhorizedRouteProps> = ({\r\n  children,\r\n  user,\r\n  ...rest\r\n}) => {\r\n  const { t } = useResource();\r\n  const isAuthenticated = !!user;\r\n \r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuthenticated ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: `/${t(Resources.Routes.Login)}`\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport { AuthenticatedRoute };\r\n","import * as React from \"react\";\r\nimport { makeStyles, createStyles } from \"@material-ui/core/styles\";\r\nimport { Toolbar, IconButton, AppBar as MuiAppBar } from \"@material-ui/core\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Resources, useResource } from \"Translations/Resources\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport headerImg from \"Assets/Images/header.jpg\";\r\n\r\ninterface AuthState {\r\n  email: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  role: string;\r\n}\r\n\r\ntype Props = {\r\n  title: string | null;\r\n  drawerWidth: number;\r\n  user: AuthState | null;\r\n};\r\n\r\nconst useStyles = (drawerWidth: number) =>\r\n  makeStyles(theme =>\r\n    createStyles({\r\n      root: {\r\n        position: \"static\",\r\n      },\r\n      menuButton: {\r\n        marginRight: theme.spacing(2),\r\n      },\r\n      title: {\r\n        flexGrow: 1,\r\n        cursor: \"cursor\",\r\n      },\r\n      header: {\r\n        position: \"relative\",\r\n        backgroundImage: `url(${headerImg})`,\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundSize: \"cover\",\r\n        borderBottom: \"6px solid #d33500\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        height: \"40vh\",\r\n        justifyContent: \"center\"\r\n      },\r\n      toolbar: {\r\n        justifyContent: \"space-between\",\r\n        height: \"50px\",\r\n        backgroundColor: \"rgba(0,0,0,.5)\",\r\n        borderBottom: \"2px solid #fff\",\r\n        position: \"fixed\",\r\n        width: \"100%\",\r\n        zIndex: 2\r\n      },\r\n      logo: {\r\n        maxWidth: \"140px\",\r\n        position: \"absolute\",\r\n        left: \"10%\",\r\n        top: \"5%\",\r\n      },\r\n      titleName: {\r\n        fontSize: \"2rem\",\r\n        fontWeight: 500,\r\n      },\r\n    }),\r\n  );\r\n\r\nconst AppBar: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles(props.drawerWidth)();\r\n  const dispatch = useDispatch();\r\n  const { t } = useResource();\r\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\r\n\r\n  return (\r\n    <>\r\n      <MuiAppBar className={classes.root}>\r\n        <div className={classes.header}>\r\n          {props.title ? (\r\n            <h1 className={classes.titleName}>{props.title}</h1>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n        <Toolbar className={classes.toolbar}>\r\n          <IconButton>\r\n            <Link\r\n              to={\r\n                props.user\r\n                  ? `/${t(Resources.Routes.Products)}`\r\n                  : `/${t(Resources.Routes.Users)}`\r\n              }\r\n            >\r\n            </Link>\r\n          </IconButton>\r\n          <IconButton\r\n            onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"menu\"\r\n          >\r\n            {props.user === null ? (\r\n              <MenuIcon className={classes.menuButton} />\r\n            ) : (\r\n              <h4 className={classes.menuButton}> {props.user.email}</h4>\r\n            )}\r\n            {isMenuOpen && props.children}\r\n          </IconButton>\r\n        </Toolbar>\r\n      </MuiAppBar>\r\n    </>\r\n  );\r\n};\r\n\r\nexport { AppBar };\r\n","import * as React from \"react\";\r\nimport {\r\n  Typography,\r\n  Divider,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  makeStyles,\r\n  createStyles,\r\n} from \"@material-ui/core\";\r\nimport PeopleIcon from \"@material-ui/icons/People\";\r\nimport { useResource, Resources } from \"Translations/Resources\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AppsIcon from \"@material-ui/icons/Apps\";\r\nimport { RootStateType } from \"State/Store\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\ntype Props = {\r\n  user: any;\r\n};\r\n\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    root: theme.mixins.toolbar,\r\n    link: {\r\n      color: \"inherit\",\r\n      textDecoration: \"inherit\",\r\n    },\r\n    menu: {\r\n      backgroundColor: \"white\",\r\n      color: \"black\",\r\n      position: \"absolute\",\r\n      top: \"55px\",\r\n      right: \"1px\"\r\n    },\r\n    menuUser: {\r\n      backgroundColor: \"white\",\r\n      color: \"black\",\r\n      position: \"absolute\",\r\n      top: \"90px\"\r\n    }\r\n  }),\r\n);\r\nconst Menu: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles();\r\n  const { t } = useResource();\r\n  const user = useSelector((e: RootStateType) => e.auth.user);\r\n\r\n  return (\r\n    <>\r\n      <div className={props.user? classes.menuUser : classes.menu}>\r\n        <Divider />\r\n        <List>\r\n        {!props.user && (\r\n            <Link\r\n              className={classes.link}\r\n              to={`/${t(Resources.Routes.Login)}`}\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <AppsIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={t(Resources.MenuItems.Login)} />\r\n              </ListItem>\r\n            </Link>\r\n          )}\r\n\r\n          {props.user && props.user.role === \"Admin\" && (\r\n            <Link\r\n              className={classes.link}\r\n              to={`/sprava/${t(Resources.Routes.Products)}`}\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <AppsIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={t(Resources.MenuItems.ManageProducts)} />\r\n              </ListItem>\r\n            </Link>\r\n          )}\r\n\r\n          {props.user && (\r\n            <Link\r\n              className={classes.link}\r\n              to={`/${t(Resources.Routes.Products)}`}\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <AppsIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={t(Resources.MenuItems.Products)} />\r\n              </ListItem>\r\n            </Link>\r\n          )}\r\n\r\n          {props.user && (\r\n            <Link\r\n              className={classes.link}\r\n              to={`/${t(Resources.Routes.LogOut)}`}\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <AppsIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={t(Resources.MenuItems.LogOut)} />\r\n              </ListItem>\r\n            </Link>\r\n          )}\r\n\r\n          {props.user && props.user.role === \"Admin\" && (\r\n            <Link\r\n              className={classes.link}\r\n              to={`/${t(Resources.Routes.Orders)}`}\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <AppsIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={t(Resources.MenuItems.AdminOrders)} />\r\n              </ListItem>\r\n            </Link>\r\n          )}\r\n\r\n          {props.user && (\r\n            <Link\r\n              className={classes.link}\r\n              to={`/${props.user.userID}/${t(Resources.Routes.Orders)}`}\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <AppsIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={t(Resources.MenuItems.UserOrders)} />\r\n              </ListItem>\r\n            </Link>\r\n          )}\r\n\r\n        </List>\r\n        <Divider />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport { Menu };\r\n","import * as React from \"react\";\r\nimport { makeStyles, useTheme, createStyles } from \"@material-ui/core/styles\";\r\nimport { AppBar } from \"./AppBar\";\r\nimport { Menu } from \"./Menu\";\r\nimport { RootStateType } from \"State/Store\";\r\nimport { useSelector } from \"react-redux\";\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles(theme =>\r\n  createStyles({\r\n    root: {\r\n      minHeight: \"100vw\"\r\n    },\r\n    drawer: {\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n      },\r\n    },\r\n    toolbar: theme.mixins.toolbar,\r\n    drawerPaper: {\r\n      width: drawerWidth,\r\n    },\r\n    content: {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    footer: {\r\n      position: \"relative\",\r\n      left: \"0\",\r\n      top: \"100vw\",\r\n      bottom: \"0\",\r\n      width: \"100%\",\r\n      height: \"50px\",\r\n      backgroundColor: \"#828181\",\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"flex-end\",\r\n      color: \"white\",\r\n      padding: \"15px\",\r\n    },\r\n  }),\r\n);\r\n\r\ntype Props = {\r\n  title: string | null;\r\n};\r\n\r\nconst AuthenticatedLayout: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const user = useSelector((e: RootStateType) => e.auth.user);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar title={props.title} drawerWidth={drawerWidth} user={user}>\r\n        <Menu user={user} />\r\n      </AppBar>\r\n      <main className={classes.content}>\r\n        <div className={classes.toolbar} />\r\n        {props.children}\r\n      </main>\r\n      <div className={classes.footer}>\r\n        {\"© \" + new Date().getFullYear()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { AuthenticatedLayout };\r\n","import { Result, UserDto } from \"Api/Api\";\r\nimport { ActionType, createAsyncAction, createReducer } from \"typesafe-actions\";\r\n\r\nexport type UsersState = {\r\n  users: UserDto[];\r\n  userDetail: UserDto | null;\r\n  isLoading: boolean;\r\n  errorCode: string | null;\r\n};\r\n\r\nexport const getUsersAsync = createAsyncAction(\r\n  \"@user/GET_USERS_REQUEST\",\r\n  \"@user/GET_USERS_SUCCESS\",\r\n  \"@user/GET_USERS_FAILURE\",\r\n)<void, UserDto[], Error>();\r\n\r\nexport const getUsersDetailAsync = createAsyncAction(\r\n  \"@user/GET_USER_DETAIL_REQUEST\",\r\n  \"@user/GET_USER_DETAIL_SUCCESS\",\r\n  \"@user/GET_USER_DETAIL_FAILURE\",\r\n)<number, UserDto, Error>();\r\n\r\nexport const deleteUsersAsync = createAsyncAction(\r\n  \"@user/DELETE_USER_REQUEST\",\r\n  \"@user/DELETE_USER_SUCCESS\",\r\n  \"@user/DELETE_USER_FAILURE\",\r\n)<number, Result, Error>();\r\n\r\nexport type UserAction =\r\n  | ActionType<typeof getUsersAsync>\r\n  | ActionType<typeof getUsersDetailAsync>;\r\n\r\nexport const userReducer = createReducer<UsersState, UserAction>({\r\n  users: [],\r\n  userDetail: null,\r\n  isLoading: false,\r\n  errorCode: null,\r\n})\r\n  .handleAction(getUsersAsync.success, (state, action) => {\r\n    return {\r\n      ...state,\r\n      users: action.payload,\r\n      errorCode: null,\r\n      isLoading: false,\r\n    };\r\n  })\r\n  .handleAction(getUsersAsync.request, state => {\r\n    return { ...state, isLoading: true };\r\n  })\r\n  .handleAction(getUsersAsync.failure, (state, action) => {\r\n    return {\r\n      ...state,\r\n      errorCode: action.payload.message,\r\n      isLoading: false,\r\n    };\r\n  })\r\n  .handleAction(getUsersDetailAsync.success, (state, action) => {\r\n    return {\r\n      ...state,\r\n      userDetail: action.payload,\r\n    };\r\n  });\r\n","import * as React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { UserDto } from \"Api/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { loginUserAsync } from \"State/Auth/AuthReducer\";\r\n\r\ntype Props = {\r\n  users: UserDto[];\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n  tableRow: {\r\n    cursor: \"pointer\",\r\n  },\r\n  button: {\r\n    padding: \"6px 16px\",\r\n    border: \"1px solid orange\",\r\n    backgroundColor: \"#00d5ff\",\r\n    color: \"#fff\",\r\n    lineHeight: \"2\",\r\n    minWidth: \"120px\",\r\n    fontSize: \"13px\",\r\n    fontWeight: 400,\r\n    \"&:hover\": {\r\n      backgroundColor: \"#fff\",\r\n      color: \"orange\",\r\n    },\r\n  },\r\n});\r\n\r\nconst UsersTable: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const onLogin = (user: any) => {\r\n    const loginUser = {\r\n      login: user.login,\r\n      password: \"null\",\r\n    };\r\n    dispatch(loginUserAsync.request(loginUser));\r\n  };\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table className={classes.table}>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Uživatel</TableCell>\r\n            <TableCell>Role</TableCell>\r\n            <TableCell align=\"right\">Jméno</TableCell>\r\n            <TableCell align=\"right\">Příjmení</TableCell>\r\n            <TableCell align=\"right\"> </TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {props.users.map(user => (\r\n            <TableRow key={user.userID}>\r\n              <TableCell component=\"th\" scope=\"row\">\r\n                {user.login}\r\n              </TableCell>\r\n              <TableCell>{user.role}</TableCell>\r\n              <TableCell align=\"right\">{user.firstName}</TableCell>\r\n              <TableCell align=\"right\">{user.lastName}</TableCell>\r\n              <TableCell align=\"right\">\r\n                {\" \"}\r\n                <button\r\n                  className={classes.button}\r\n                  onClick={() => onLogin(user)}\r\n                >\r\n                  {\" \"}\r\n                  Přihlásit se\r\n                </button>\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nexport { UsersTable };\r\n","import * as React from \"react\";\r\nimport { AuthenticatedLayout } from \"Components/Layout/AuthenticatedLayout\";\r\nimport { useResource, Resources } from \"Translations/Resources\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getUsersAsync } from \"State/Users/UserReducer\";\r\nimport { RootStateType } from \"State/Store\";\r\nimport { UsersTable } from \"Components/Users/UsersTable\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst UsersPage: React.FunctionComponent = _ => {\r\n  const { t } = useResource();\r\n  const { isLoading, users } = useSelector((e: RootStateType) => e.users);\r\n  const user = useSelector((e: RootStateType) => e.auth.user);\r\n  const dispatch = useDispatch();\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getUsersAsync.request());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <AuthenticatedLayout title={t(Resources.Users.Title)}>\r\n      {!isLoading && <UsersTable users={users} />}\r\n      {user !== null ? <Redirect to=\"/produkty\" /> : \"\"}\r\n    </AuthenticatedLayout>\r\n  );\r\n};\r\n\r\nexport { UsersPage };\r\n","import * as React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { resetUser } from \"State/Auth/AuthReducer\";\r\n\r\nconst UserLogout: React.FunctionComponent = _ => {\r\n  const dispatch = useDispatch();\r\n\r\n  React.useEffect(() => {\r\n    dispatch(resetUser());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <>\r\n      <Redirect to=\"/prihlaseni\" />\r\n    </>\r\n  );\r\n};\r\n\r\nexport { UserLogout };\r\n","import { Result, ProductDto, ProductSearchFilter } from \"../../Api/Api\";\r\nimport { ActionType, createAction, createAsyncAction, createReducer } from \"typesafe-actions\";\r\n\r\nexport type ProductsState = {\r\n  products: ProductDto[];\r\n  isLoading: boolean;\r\n  errorCode: string | null;\r\n}; \r\n\r\nexport const getProductsAsync = createAsyncAction(\r\n  \"@products/GET_PRODUCTS_REQUEST\",\r\n  \"@products/GET_PRODUCTS_SUCCESS\",\r\n  \"@products/GET_PRODUCTS_FAILURE\",\r\n)<void, ProductDto[], Error>();\r\n\r\nexport const postProductAsync = createAsyncAction(\r\n  \"@products/POST_PRODUCTS_REQUEST\",\r\n  \"@products/POST_PRODUCTS_SUCCESS\",\r\n  \"@products/POST_PRODUCTS_FAILURE\",\r\n)<any, ProductDto, Error>();\r\n\r\nexport const deleteProductAsync = createAsyncAction(\r\n  \"@products/DELETE_PRODUCTS_REQUEST\",\r\n  \"@products/DELETE_PRODUCTS_SUCCESS\",\r\n  \"@products/DELETE_PRODUCTS_FAILURE\",\r\n)<number, number, Error>();\r\n\r\nexport const editProductAsync = createAsyncAction(\r\n  \"@products/EDIT_PRODUCTS_REQUEST\",\r\n  \"@products/EDIT_PRODUCTS_SUCCESS\",\r\n  \"@products/EDIT_PRODUCTS_FAILURE\",\r\n)<any, ProductDto, Error>();\r\n\r\nexport const findProductsAsync = createAsyncAction(\r\n  \"@products/FIND_PRODUCTS_REQUEST\",\r\n  \"@products/FIND_PRODUCTS_SUCCESS\",\r\n  \"@products/FIND_PRODUCTS_FAILURE\",\r\n)<ProductSearchFilter, ProductDto[], Error>();\r\n\r\nexport const buyProductSync = createAction(\r\n  \"@products/BUY_PRODUCT\"\r\n)<any>();\r\n\r\n\r\nexport type ProductAction = \r\n  | ActionType<typeof getProductsAsync> \r\n  | ActionType<typeof postProductAsync>\r\n  | ActionType<typeof deleteProductAsync>\r\n  | ActionType<typeof editProductAsync>\r\n  | ActionType<typeof findProductsAsync>\r\n  | ActionType<typeof buyProductSync>\r\n\r\nexport const productsReducer = createReducer<ProductsState, ProductAction>({\r\n    products: [],\r\n    isLoading: false,\r\n    errorCode: null,\r\n  })\r\n    .handleAction(getProductsAsync.success, (state, action) => {\r\n      let newProducts = <ProductDto[]>[];\r\n      for (const key in action.payload) {\r\n        let newProduct = action.payload[key];\r\n        newProduct.productID = key;\r\n        newProducts.push(\r\n          newProduct\r\n          // action.payload[key]\r\n        )\r\n        console.log(key);\r\n        //console.log(action.payload[key]);\r\n      }\r\n      return {\r\n        ...state,\r\n        products: newProducts,\r\n        errorCode: null,\r\n        isLoading: false,\r\n      };\r\n    })\r\n    .handleAction(getProductsAsync.request, state => {\r\n      return { ...state, isLoading: true };\r\n    })\r\n    .handleAction(getProductsAsync.failure, (state, action) => {\r\n      return {\r\n        ...state,\r\n        errorCode: action.payload.message,\r\n        isLoading: false,\r\n      }\r\n    })\r\n    .handleAction(postProductAsync.request, state => {\r\n      return { ...state, isLoading: true };\r\n    })\r\n    .handleAction(postProductAsync.success, (state, action) => {\r\n      // const products = [...state.products, action.payload];\r\n\r\n      return { \r\n        ...state,\r\n        isLoading: false \r\n      };\r\n    })\r\n    .handleAction(postProductAsync.failure, (state, action) => {\r\n      return {\r\n        ...state,\r\n        errorCode: action.payload.message,\r\n        isLoading: false,\r\n      }\r\n    })\r\n    .handleAction(deleteProductAsync.request, state => {\r\n      return { ...state, isLoading: true };\r\n    })\r\n    .handleAction(deleteProductAsync.success, (state, action) => {\r\n      const products = state.products.filter(product => product.productID !== action.payload);\r\n\r\n      return { \r\n        ...state, \r\n        products: products,\r\n        isLoading: false \r\n      };\r\n    })\r\n    .handleAction(deleteProductAsync.failure, (state, action) => {\r\n      return {\r\n        ...state,\r\n        errorCode: action.payload.message,\r\n        isLoading: false\r\n      }\r\n    })\r\n    .handleAction(editProductAsync.request, state => {\r\n      return { ...state, isLoading: true };\r\n    })\r\n    .handleAction(editProductAsync.success, (state, action) => {\r\n\r\n      const index = state.products.findIndex(i => i.productID === action.payload.productID)\r\n      const products = [...state.products]\r\n      products[index] = action.payload;\r\n      \r\n      return { \r\n        ...state, \r\n        products: products,\r\n        isLoading: false \r\n      };\r\n    })\r\n    .handleAction(editProductAsync.failure, (state, action) => {\r\n      return {\r\n        ...state,\r\n        errorCode: action.payload.message,\r\n        isLoading: false\r\n      }\r\n    })\r\n    .handleAction(findProductsAsync.success, (state, action) => {\r\n      let newProducts = <ProductDto[]>[];\r\n      for (const key in action.payload) {\r\n        let newProduct = action.payload[key];\r\n        newProduct.productID = key;\r\n        newProducts.push(\r\n          newProduct\r\n          // action.payload[key]\r\n        )\r\n        console.log(key);\r\n        //console.log(action.payload[key]);\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        products: newProducts,\r\n        errorCode: null,\r\n        isLoading: false,\r\n      };\r\n    })\r\n    .handleAction(findProductsAsync.request, state => {\r\n      return { ...state, isLoading: true };\r\n    })\r\n    .handleAction(findProductsAsync.failure, (state, action) => {\r\n      return {\r\n        ...state,\r\n        errorCode: action.payload.message,\r\n        isLoading: false,\r\n      }\r\n    })\r\n    .handleAction(buyProductSync, (state, action) => {\r\n      const index = state.products.findIndex(i => i.productID === action.payload)\r\n      const products = [...state.products]\r\n      products[index].quantity -= 1;\r\n      return {\r\n        ...state,\r\n        products: products\r\n      }\r\n    })\r\n\r\n    \r\n    ","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { CategoryDTO, ProductDto } from \"Api/Api\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport {\r\n  postProductAsync,\r\n  editProductAsync,\r\n} from \"State/Products/ProductsReducer\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport * as yup from \"yup\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\n\r\ntype Props = {\r\n  onCancel: () => void;\r\n  product: ProductDto | null;\r\n  categories: CategoryDTO[];\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  newForm: {\r\n    margin: \"10px 0 10px 0\",\r\n    padding: \"0 10px\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    alignItems: \"baseline\",\r\n    justifyContent: \"space-between\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  name: {\r\n    width: \"35%\",\r\n  },\r\n  category: {\r\n    width: \"45%\",\r\n    padding: \"0\",\r\n    height: \"40px\",\r\n  },\r\n  quantity: {\r\n    width: \"30%\",\r\n  },\r\n  priceDiscount: {\r\n    width: \"10%\",\r\n  },\r\n  button: {\r\n    padding: \"6px 16px\",\r\n    border: \"none\",\r\n    borderRadius: \"5%\",\r\n    color: \"orange\",\r\n    lineHeight: \"2\",\r\n    minWidth: \"120px\",\r\n    fontSize: \"13px\",\r\n    fontWeight: 400,\r\n  },\r\n  buttonSuccess: {\r\n    color: \"#fff\",\r\n    backgroundColor: \"#00d5ff\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#fff\",\r\n      color: \"orange\",\r\n    },\r\n  },\r\n  redBorder: {\r\n    border: \"1px solid red\",\r\n  },\r\n  buttonCancel: {\r\n    borderColor: \"hsla(197,3%,45%,.616)\",\r\n    color: \"hsla(197,3%,45%,.616)\",\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  fileInput: {\r\n    display: \"none\",\r\n  },\r\n});\r\n\r\nexport type FormData = {\r\n  productName: string;\r\n  productPrice: number;\r\n  productQuantity: number;\r\n  productPicture: any;\r\n  productPriceDiscount: number;\r\n  productCategory: number;\r\n};\r\n\r\nconst ProductEdit: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles();\r\n  const [isPicture, setIsPicture] = React.useState(false);\r\n  const [isDiscount, setIsDiscount] = React.useState(false);\r\n  const [isNew, setIsNew] = React.useState(true);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  React.useEffect(() => {\r\n    if (props.product) {\r\n      if (props.product.discountPrice) {\r\n        setIsDiscount(true);\r\n      }\r\n      if (!props.product.isNew) {\r\n        setIsNew(false);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleSubmitData = (data: FormData) => {\r\n    let newProduct = {\r\n      productID: props.product ? props.product.productID : 0,\r\n      createdBy: props.product ? props.product.createdBy : 0,\r\n      updatedBy: props.product ? props.product.updatedBy : 0,\r\n      isDeleted: props.product ? props.product.isDeleted : false,\r\n      name: data.productName,\r\n      price: data.productPrice,\r\n      quantity: data.productQuantity,\r\n      discountPrice: isDiscount ? data.productPriceDiscount : 0,\r\n      isNew: isNew,\r\n      categoryID: Number(data.productCategory),\r\n      imageURL: props.product?.imageURL ? props.product.imageURL : \"null\",\r\n      image: \"null\"\r\n    };\r\n\r\n    const formData = new FormData();\r\n    Object.entries(newProduct).map(([key, val]) =>\r\n      formData.append(key, val.toString()),\r\n    );\r\n\r\n    // Firebase doesn't accept FormData -> send original object\r\n    if (props.product) {\r\n      // dispatch(editProductAsync.request(formData));\r\n      dispatch(editProductAsync.request(newProduct));\r\n    } else {\r\n      // formData.append(\"image\", data.productPicture[0]);\r\n      // dispatch(postProductAsync.request(formData));\r\n      newProduct.image = data.productPicture[0];\r\n      dispatch(postProductAsync.request(newProduct));\r\n    }\r\n  };\r\n\r\n  const validationSchema: yup.ObjectSchema = yup.object({\r\n    productName: yup.string().min(3).required().defined(),\r\n    productPrice: yup.number().required().positive().integer().defined(),\r\n    productQuantity: yup.number().required().positive().integer().defined(),\r\n    productPriceDiscount: isDiscount\r\n      ? yup.number().positive().integer().defined()\r\n      : yup.mixed(),\r\n  });\r\n\r\n  const { register, control, handleSubmit, errors } = useForm({\r\n    validationSchema,\r\n    mode: \"onChange\",\r\n  });\r\n\r\n  const onSubmit = (data: any) => {\r\n    if (data.productPicture[0] === undefined) {\r\n      if (props.product) {\r\n        handleSubmitData(data);\r\n        return;\r\n      }\r\n      setIsPicture(false);\r\n      return;\r\n    } else if (data.productPicture[0].type !== \"image/png\") {\r\n      setIsPicture(false);\r\n      return;\r\n    }\r\n    handleSubmitData(data);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)} className={classes.newForm}>\r\n      <Controller\r\n        type=\"text\"\r\n        size=\"small\"\r\n        className={classes.name}\r\n        variant=\"outlined\"\r\n        control={control}\r\n        as={TextField}\r\n        name=\"productName\"\r\n        id=\"productName\"\r\n        defaultValue={props.product ? props.product.name : \"\"}\r\n        error={errors.productName !== undefined}\r\n      />\r\n      <label\r\n        className={[classes.button, [!isPicture ? classes.redBorder : \"\"]].join(\r\n          \" \",\r\n        )}\r\n        htmlFor=\"productPicture\"\r\n      >\r\n        {!isPicture ? \"Vybrat soubor\" : \"Soubor vybrán\"}\r\n      </label>\r\n      <input\r\n        accept=\"image/png\"\r\n        type=\"file\"\r\n        ref={register()}\r\n        className={classes.fileInput}\r\n        name=\"productPicture\"\r\n        id=\"productPicture\"\r\n        onChange={() => setIsPicture(true)}\r\n        defaultValue=\"\"\r\n      />\r\n      <Controller\r\n        type=\"number\"\r\n        size=\"small\"\r\n        variant=\"outlined\"\r\n        className={isDiscount ? classes.priceDiscount : \"\"}\r\n        control={control}\r\n        as={TextField}\r\n        name=\"productPrice\"\r\n        id=\"productPrice\"\r\n        defaultValue={props.product ? props.product.price : \"\"}\r\n        InputProps={{\r\n          endAdornment: <InputAdornment position=\"start\">Kč</InputAdornment>,\r\n        }}\r\n        error={errors.productPrice !== undefined}\r\n      />\r\n\r\n      {isDiscount && (\r\n        <>\r\n          <h3>→</h3>\r\n          <Controller\r\n            type=\"number\"\r\n            size=\"small\"\r\n            className={classes.priceDiscount}\r\n            variant=\"outlined\"\r\n            control={control}\r\n            as={TextField}\r\n            name=\"productPriceDiscount\"\r\n            id=\"productPriceDiscount\"\r\n            defaultValue={\r\n              props.product?.discountPrice ? props.product.discountPrice : \"\"\r\n            }\r\n            InputProps={{\r\n              endAdornment: <InputAdornment position=\"start\">Kč</InputAdornment>,\r\n            }}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      <Controller\r\n        type=\"number\"\r\n        size=\"small\"\r\n        className={classes.quantity}\r\n        variant=\"outlined\"\r\n        control={control}\r\n        as={TextField}\r\n        name=\"productQuantity\"\r\n        id=\"productQuantity\"\r\n        defaultValue={props.product ? props.product.quantity : \"\"}\r\n        InputProps={{\r\n          endAdornment: <InputAdornment position=\"start\">ks</InputAdornment>,\r\n        }}\r\n        error={errors.productQuantity !== undefined}\r\n      />\r\n\r\n      <Controller\r\n        className={classes.category}\r\n        variant=\"outlined\"\r\n        control={control}\r\n        defaultValue={props.product ? props.product.categoryID : \"\"}\r\n        as={<Select className={classes.category} />}\r\n        name=\"productCategory\"\r\n        id=\"productCategory\"\r\n      >\r\n        {props.categories.map(C => (\r\n          <MenuItem key={C.categoryID} value={C.categoryID}>\r\n            {C.name}\r\n          </MenuItem>\r\n        ))}\r\n      </Controller>\r\n\r\n      <FormControlLabel\r\n        label=\"Novinka\"\r\n        control={<Checkbox checked={isNew} onChange={() => setIsNew(!isNew)} />}\r\n      />\r\n\r\n      <FormControlLabel\r\n        label=\"Sleva\"\r\n        control={\r\n          <Checkbox\r\n            checked={isDiscount}\r\n            onChange={() => setIsDiscount(!isDiscount)}\r\n          />\r\n        }\r\n      />\r\n\r\n      <input\r\n        type=\"submit\"\r\n        value=\"Uložit\"\r\n        className={[classes.button, classes.buttonSuccess].join(\" \")}\r\n      />\r\n      <button\r\n        onClick={props.onCancel}\r\n        className={[classes.button, classes.buttonCancel].join(\" \")}\r\n      >\r\n        Zahodit\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport { ProductEdit };\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { CategoryDTO, ProductDto } from \"Api/Api\";\r\nimport { ProductEdit } from \"Components/Products/ProductEdit\";\r\nimport BuildIcon from \"@material-ui/icons/Build\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  tableRow: {\r\n    cursor: \"pointer\",\r\n  },\r\n  editCell: {\r\n    padding: \"0\",\r\n    borderBottom: \"1px solid rgba(224, 224, 224, 1);\",\r\n  },\r\n  picture: {\r\n    maxWidth: \"60px\",\r\n  },\r\n  orangeIcon: {\r\n    color: \"#ff7b00\",\r\n    width: \"25px\",\r\n    height: \"25px\",\r\n    transform: \"scaleX(-1)\",\r\n  },\r\n  categories: {\r\n    display: \"flex\",\r\n    color: \"grey\",\r\n  },\r\n  prices: {\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  lineThrough: {\r\n    textDecoration: \"line-through\",\r\n    marginRight: theme.spacing(1),\r\n  },\r\n}));\r\n\r\ntype Props = {\r\n  edit: boolean;\r\n  product: ProductDto;\r\n  onEditCancel: () => void | null;\r\n  onEditStart: () => void | null;\r\n  onDelete: () => void | null;\r\n  categories: CategoryDTO[];\r\n};\r\n\r\nconst ProductRow: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles();\r\n\r\n  return props.edit ? (\r\n    <TableRow key={props.product.productID} className={classes.tableRow}>\r\n      <td colSpan={5} className={classes.editCell}>\r\n        <ProductEdit\r\n          product={props.product}\r\n          onCancel={props.onEditCancel}\r\n          categories={props.categories}\r\n        />\r\n      </td>\r\n    </TableRow>\r\n  ) : (\r\n    <TableRow key={props.product.productID} className={classes.tableRow}>\r\n      <TableCell component=\"th\" scope=\"row\">\r\n        {props.product.name}{\" \"}\r\n        <div className={classes.categories}>\r\n          {props.product.isNew && \"#Novinka \"}\r\n          {props.product.discountPrice && \"#Sleva \"}\r\n          {props.categories\r\n            .filter(c => c.categoryID == props.product.categoryID)\r\n            .map(ca => ca.name)}\r\n        </div>\r\n      </TableCell>\r\n      <TableCell align=\"right\">\r\n        {props.product.imageURL ? (\r\n          <img\r\n            className={classes.picture}\r\n            src={API_URL + props.product.imageURL}\r\n          />\r\n        ) : (\r\n          \"Pic\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell align=\"right\">\r\n        <div className={classes.prices}>\r\n          <p className={props.product.discountPrice ? classes.lineThrough : \"\"}>\r\n            {props.product.price} Kč\r\n          </p>\r\n          {props.product.discountPrice ? (\r\n            <p>{props.product.discountPrice} Kč</p>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n      </TableCell>\r\n      <TableCell align=\"right\">{props.product.quantity} Ks</TableCell>\r\n      <TableCell align=\"right\">\r\n        <BuildIcon className={classes.orangeIcon} onClick={props.onEditStart} />\r\n        <ClearIcon className={classes.orangeIcon} onClick={props.onDelete} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nexport { ProductRow };\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { CategoryDTO, ProductDto } from \"Api/Api\";\r\nimport AddCircleIcon from \"@material-ui/icons/AddCircle\";\r\nimport { ProductEdit } from \"Components/Products/ProductEdit\";\r\nimport { ProductRow } from \"Components/Products/ProductRow\";\r\nimport { deleteProductAsync } from \"State/Products/ProductsReducer\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\ntype Props = {\r\n  products: ProductDto[];\r\n  categories: CategoryDTO[];\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n    tableLayout: \"fixed\",\r\n    boxShadow: \"none\",\r\n  },\r\n  tableRow: {\r\n    cursor: \"pointer\",\r\n  },\r\n  addIcon: {\r\n    float: \"right\",\r\n    margin: \"10px\",\r\n    color: \"#ff7b00\",\r\n    width: \"30px\",\r\n    height: \"30px\",\r\n  },\r\n});\r\n\r\nconst ProductsTable: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles();\r\n  const [isAddForm, setIsAddForm] = useState(false);\r\n  const [editList, setEditList] = useState<Array<number>>([]);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleDelete = (id: number) => {\r\n    dispatch(deleteProductAsync.request(id));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <TableContainer>\r\n        <AddCircleIcon\r\n          onClick={() => setIsAddForm(!isAddForm)}\r\n          className={classes.addIcon}\r\n        />\r\n        <Table className={classes.table}>\r\n          <TableHead>\r\n            <TableRow className={classes.tableRow}>\r\n              <TableCell align=\"center\">Produkt</TableCell>\r\n              <TableCell> </TableCell>\r\n              <TableCell align=\"right\">Cena za ks</TableCell>\r\n              <TableCell align=\"right\">Aktuální množství</TableCell>\r\n              <TableCell> </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {isAddForm && (\r\n              <TableRow>\r\n                <td colSpan={5}>\r\n                  <ProductEdit\r\n                    onCancel={() => setIsAddForm(false)}\r\n                    product={null}\r\n                    categories={props.categories}\r\n                  />\r\n                </td>\r\n              </TableRow>\r\n            )}\r\n            {props.products\r\n              .filter(product => !product.isDeleted)\r\n              .map(product => {\r\n                if (editList.indexOf(product.productID) == -1) {\r\n                  return (\r\n                    <ProductRow\r\n                      key={product.productID}\r\n                      onDelete={() => handleDelete(product.productID)}\r\n                      onEditStart={() =>\r\n                        setEditList([...editList, product.productID])\r\n                      }\r\n                      onEditCancel={() => {}}\r\n                      edit={false}\r\n                      product={product}\r\n                      categories={props.categories}\r\n                    />\r\n                  );\r\n                } else\r\n                  return (\r\n                    <ProductRow\r\n                      key={product.productID}\r\n                      onDelete={() => {}}\r\n                      onEditStart={() => {}}\r\n                      onEditCancel={() =>\r\n                        setEditList(\r\n                          editList.filter(id => id !== product.productID),\r\n                        )\r\n                      }\r\n                      edit={true}\r\n                      product={product}\r\n                      categories={props.categories} \r\n                    />\r\n                  );\r\n              })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { ProductsTable };\r\n","import { Result, CategoryDTO } from \"../../Api/Api\";\r\nimport { ActionType, createAsyncAction, createReducer } from \"typesafe-actions\";\r\n\r\nexport type CategoriesState = {\r\n  categories: CategoryDTO[];\r\n  isLoading: boolean;\r\n  errorCode: string | null;\r\n};\r\n\r\nexport const getCategoriesAsync = createAsyncAction(\r\n  \"@categories/GET_CATEGORIES_REQUEST\",\r\n  \"@categories/GET_CATEGORIES_SUCCESS\",\r\n  \"@categories/GET_CATEGORIES_FAILURE\",\r\n)<void, CategoryDTO[], Error>();\r\n\r\nexport type CategoryAction = ActionType<typeof getCategoriesAsync>;\r\n\r\nexport const categoriesReducer = createReducer<CategoriesState, CategoryAction>(\r\n  {\r\n    categories: [],\r\n    isLoading: false,\r\n    errorCode: null,\r\n  },\r\n)\r\n  .handleAction(getCategoriesAsync.success, (state, action) => {\r\n    let newCategories: {categoryID: any, name: any}[] = [];\r\n    for (let key in action.payload) {\r\n      if (action.payload[key] !== null) {\r\n        let newCategory = {\r\n          categoryID: key,\r\n          name: action.payload[key]\r\n        }\r\n        newCategories.push(newCategory);\r\n      }\r\n    }\r\n    return {\r\n      ...state,\r\n      categories: newCategories,\r\n      errorCode: null,\r\n      isLoading: false,\r\n    };\r\n  })\r\n  .handleAction(getCategoriesAsync.request, state => {\r\n    return { ...state, isLoading: true };\r\n  })\r\n  .handleAction(getCategoriesAsync.failure, (state, action) => {\r\n    return {\r\n      ...state,\r\n      errorCode: action.payload.message,\r\n      isLoading: false,\r\n    };\r\n  });\r\n","import * as React from \"react\";\r\nimport { AuthenticatedLayout } from \"Components/Layout/AuthenticatedLayout\";\r\nimport { useResource, Resources } from \"Translations/Resources\";\r\nimport { getProductsAsync } from \"State/Products/ProductsReducer\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootStateType } from \"State/Store\";\r\nimport { ProductsTable } from \"Components/Products/ProductsTable\";\r\nimport { getCategoriesAsync } from \"State/Categories/CategoriesReducer\";\r\n\r\nconst ProductsManagePage: React.FunctionComponent = _ => {\r\n  const { t } = useResource();\r\n  const dispatch = useDispatch();\r\n\r\n  const { isLoading, products } = useSelector((e: RootStateType) => e.products);\r\n  const { categories } = useSelector((e: RootStateType) => e.categories);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getProductsAsync.request());\r\n    if (categories.length == 0) {\r\n      dispatch(getCategoriesAsync.request());\r\n    }\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <AuthenticatedLayout title={t(Resources.Products.Title)}>\r\n      {!isLoading && <ProductsTable products={products} categories={categories} />}\r\n    </AuthenticatedLayout>\r\n  );\r\n};\r\n\r\nexport { ProductsManagePage };\r\n","import { Result, OrderDTO, GetOrderListQuery } from \"../../Api/Api\";\r\nimport { ActionType, createAsyncAction, createReducer } from \"typesafe-actions\";\r\n\r\nexport type OrdersState = {\r\n  orders: OrderDTO[];\r\n  isLoading: boolean;\r\n  errorCode: string | null;\r\n};\r\n\r\nexport const getOrdersAsync = createAsyncAction(\r\n  \"@orders/GET_ORDERS_REQUEST\",\r\n  \"@orders/GET_ORDERS_SUCCESS\",\r\n  \"@orders/GET_ORDERS_FAILURE\",\r\n)<GetOrderListQuery, OrderDTO[], Error>();\r\n\r\nexport const postOrderAsync = createAsyncAction(\r\n  \"@orders/POST_ORDERS_REQUEST\",\r\n  \"@orders/POST_ORDERS_SUCCESS\",\r\n  \"@orders/POST_ORDERS_FAILURE\",\r\n)<OrderDTO, OrderDTO, Error>();\r\n\r\nexport const deleteOrderAsync = createAsyncAction(\r\n  \"@orders/DELETE_ORDERS_REQUEST\",\r\n  \"@orders/DELETE_ORDERS_SUCCESS\",\r\n  \"@orders/DELETE_ORDERS_FAILURE\",\r\n)<number, number, Error>();\r\n\r\nexport type OrderAction =\r\n  | ActionType<typeof getOrdersAsync>\r\n  | ActionType<typeof postOrderAsync>\r\n  | ActionType<typeof deleteOrderAsync>;\r\n\r\nexport const ordersReducer = createReducer<OrdersState, OrderAction>({\r\n  orders: [],\r\n  isLoading: false,\r\n  errorCode: null,\r\n})\r\n  .handleAction(getOrdersAsync.success, (state, action) => {\r\n    return {\r\n      ...state,\r\n      orders: action.payload,\r\n      errorCode: null,\r\n      isLoading: false,\r\n    };\r\n  })\r\n  .handleAction(getOrdersAsync.request, state => {\r\n    return { ...state, isLoading: true };\r\n  })\r\n  .handleAction(getOrdersAsync.failure, (state, action) => {\r\n    return {\r\n      ...state,\r\n      errorCode: action.payload.message,\r\n      isLoading: false,\r\n    };\r\n  })\r\n  .handleAction(postOrderAsync.success, (state, action) => {\r\n    const orders = [...state.orders, action.payload];\r\n    return {\r\n        ...state,\r\n        orders: orders,\r\n        isLoading: false \r\n    };\r\n  })\r\n  .handleAction(postOrderAsync.request, state => {\r\n    return { ...state, isLoading: true };\r\n  })\r\n  .handleAction(postOrderAsync.failure, (state, action) => {\r\n    return {\r\n      ...state,\r\n      errorCode: action.payload.message,\r\n      isLoading: false,\r\n    };\r\n  })\r\n  .handleAction(deleteOrderAsync.success, (state, action) => {\r\n    const orders = state.orders.filter(order => order.orderId !== action.payload);\r\n    return {\r\n      ...state,\r\n      orders: orders,\r\n      errorCode: null,\r\n      isLoading: false,\r\n    };\r\n  })\r\n  .handleAction(deleteOrderAsync.request, state => {\r\n    return { ...state, isLoading: true };\r\n  })\r\n  .handleAction(deleteOrderAsync.failure, (state, action) => {\r\n    return {\r\n      ...state,\r\n      errorCode: action.payload.message,\r\n      isLoading: false,\r\n    };\r\n  })\r\n  \r\n\r\n","import * as React from \"react\";\r\nimport { ProductDto } from \"Api/Api\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { postOrderAsync } from \"State/Orders/OrdersReducer\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { editProductAsync } from \"State/Products/ProductsReducer\";\r\nimport productImg from \"Assets/Images/bag_icon.jpg\";\r\nimport { RootStateType } from \"State/Store\";\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport { Resources, useResource } from \"Translations/Resources\";\r\n\r\ntype Props = {\r\n  product: ProductDto;\r\n};\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  productItem: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    minWidth: \"90%\",\r\n    maxHeight: \"350px\",\r\n    whiteSpace: \"nowrap\",\r\n    position: \"relative\",\r\n    margin: \"1px\",\r\n    boxShadow:\r\n      \"0 2px 2px 0 rgba(0,0,0,.14), 0 3px 1px -2px rgba(0,0,0,.12), 0 1px 5px 0 rgba(0,0,0,.2)\",\r\n  },\r\n  picture: {\r\n    maxWidth: \"50%\",\r\n    height: \"150px\",\r\n    marginTop: \"20px\",\r\n  },\r\n  stockSection: {\r\n    width: \"100%\",\r\n    color: \"#7cb342\",\r\n    marginLeft: \"20px\",\r\n  },\r\n  buySection: {\r\n    width: \"100%\",\r\n    borderTop: \"2px solid #f8f8f8\",\r\n    padding: \"12px\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-beween\",\r\n    alignItems: \"center\",\r\n  },\r\n  price: {\r\n    float: \"left\",\r\n    fontWeight: 700,\r\n    color: \"red\",\r\n    width: \"50%\",\r\n  },\r\n  buttonSection: {\r\n    width: \"50%\",\r\n  },\r\n  button: {\r\n    float: \"right\",\r\n    padding: \"6px 16px\",\r\n    border: \"none\",\r\n    borderRadius: \"5%\",\r\n    backgroundColor: \"#00d5ff\",\r\n    color: \"#fff\",\r\n    lineHeight: \"2\",\r\n    minWidth: \"120px\",\r\n    fontSize: \"13px\",\r\n    fontWeight: 400,\r\n    \"&:hover\": {\r\n      backgroundColor: \"#fff\",\r\n      color: \"orange\",\r\n    },\r\n  },\r\n  discountIcon: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    borderRadius: \"50%\",\r\n    backgroundColor: \"#ff0\",\r\n    fontSize: \".75rem\",\r\n    width: \"60px\",\r\n    height: \"60px\",\r\n    position: \"absolute\",\r\n    right: \"5px\",\r\n    top: \"5px\",\r\n    fontWeight: 700,\r\n  },\r\n  newIcon: {\r\n    width: \"50px\",\r\n    height: \"50px\",\r\n    borderRadius: \"7px\",\r\n    border: \"none\",\r\n    backgroundColor: \"#2475b0\",\r\n    position: \"absolute\",\r\n    top: \"10px\",\r\n    right: \"10px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    transform: \"rotate(15deg)\",\r\n\r\n    \"&::before\": {\r\n      content: '\"\"',\r\n      width: \"50px\",\r\n      height: \"50px\",\r\n      borderRadius: \"7px\",\r\n      border: \"none\",\r\n      backgroundColor: \"#2475b0\",\r\n      transform: \"rotate(30deg)\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n    },\r\n    \"&::after\": {\r\n      content: '\"\"',\r\n      width: \"50px\",\r\n      height: \"50px\",\r\n      borderRadius: \"7px\",\r\n      border: \"none\",\r\n      backgroundColor: \"#2475b0\",\r\n      transform: \"rotate(60deg)\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n    },\r\n  },\r\n  topAdd: {\r\n    top: \"80px\",\r\n  },\r\n  uppercase: {\r\n    color: \"#fff\",\r\n    fontWeight: 700,\r\n    zIndex: 3,\r\n    letterSpacing: \"1.1px\",\r\n    transform: \"rotate(-15deg)\",\r\n    fontSize: \"15px\",\r\n  },\r\n});\r\n\r\nconst ProductItem: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((e: RootStateType) => e.auth.user);\r\n  const history = useHistory();\r\n  const { t } = useResource();\r\n\r\n  const postOrderHandler = (product: ProductDto) => {\r\n    if (!user) {\r\n      history.push(`/${t(Resources.Routes.Login)}`);\r\n      return;\r\n    }\r\n    const query = {\r\n      name: product.name,\r\n      price: product.price,\r\n      productId: product.productID,\r\n    };\r\n    let updatedProduct = product;\r\n    updatedProduct.quantity -= 1;\r\n    dispatch(postOrderAsync.request(query));\r\n    dispatch(editProductAsync.request(updatedProduct));\r\n\r\n  };\r\n\r\n  const formatDiscount = (product: ProductDto) => {\r\n    if (!product.discountPrice) return;\r\n    if (product.discountPrice < product.price) {\r\n      return `-${(100 - (product.discountPrice * 100) / product.price).toFixed(\r\n        0,\r\n      )}`;\r\n    } else {\r\n      return `+${((product.discountPrice * 100) / product.price - 100).toFixed(\r\n        0,\r\n      )}`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.productItem}>\r\n      {props.product.imageURL ? (\r\n        <img\r\n          className={classes.picture}\r\n          src={productImg}\r\n        />\r\n      ) : (\r\n        \"Pic\"\r\n      )}\r\n      <h3>{props.product.name} </h3>\r\n      {props.product.discountPrice ? (\r\n        <div className={classes.discountIcon}>\r\n          {\" \"}\r\n          {formatDiscount(props.product)}%\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      {props.product.isNew ? (\r\n        <div\r\n          className={[\r\n            classes.newIcon,\r\n            [props.product.discountPrice ? classes.topAdd : \"\"],\r\n          ].join(\" \")}\r\n        >\r\n          <span className={classes.uppercase}>NEW</span>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      <div className={classes.stockSection}>\r\n        Skladem {props.product.quantity} ks\r\n      </div>\r\n      <div className={classes.buySection}>\r\n        <p className={classes.price}>{props.product.price} Kč</p>\r\n        <div className={classes.buttonSection}>\r\n          <button\r\n            onClick={() => postOrderHandler(props.product)}\r\n            className={classes.button}\r\n          >\r\n            Koupit{\" \"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { ProductItem };\r\n","import * as React from \"react\";\r\nimport { AuthenticatedLayout } from \"Components/Layout/AuthenticatedLayout\";\r\nimport { useResource, Resources } from \"Translations/Resources\";\r\nimport {\r\n  getProductsAsync,\r\n  findProductsAsync,\r\n} from \"State/Products/ProductsReducer\";\r\nimport { getCategoriesAsync } from \"State/Categories/CategoriesReducer\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootStateType } from \"State/Store\";\r\nimport { ProductItem } from \"./ProductItem\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    flexGrow: 1,\r\n    overflowX: \"hidden\",\r\n  },\r\n  container: {\r\n    display: \"grid\",\r\n    gap: \"30px\",\r\n    [\"@media (min-width:1007px)\"]: {\r\n      gridTemplateColumns: \"1fr 1fr 1fr 1fr\",\r\n    },\r\n    [\"@media (max-width:1006px)\"]: {\r\n      gridTemplateColumns: \"1fr 1fr\",\r\n    },\r\n    [\"@media (max-width:600px)\"]: {\r\n      gridTemplateColumns: \"1fr\",\r\n    },\r\n  },\r\n  searchContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    width: \"100%\",\r\n    margin: \"20px\",\r\n  },\r\n  button: {\r\n    float: \"right\",\r\n    padding: \"6px 16px\",\r\n    border: \"none\",\r\n    borderRadius: \"5%\",\r\n    backgroundColor: \"#00d5ff\",\r\n    color: \"#fff\",\r\n    lineHeight: \"2\",\r\n    minWidth: \"120px\",\r\n    fontSize: \"13px\",\r\n    fontWeight: 400,\r\n    \"&:hover\": {\r\n      backgroundColor: \"#fff\",\r\n      color: \"orange\",\r\n    },\r\n    marginLeft: \"15px\",\r\n  },\r\n  input: {\r\n    width: \"100%\",\r\n    backgroundColor: \"white\",\r\n  },\r\n  title: {\r\n    textAlign: \"center\",\r\n    color: \"white\",\r\n    margin: \".5rem\",\r\n    fontSize: \"2rem\",\r\n    fontWeight: 500,\r\n  },\r\n  clearButton: {\r\n    position: \"absolute\",\r\n    left: \"67%\",\r\n    top: \"90px\",\r\n    borderRadius: \"50%\",\r\n    height: \"20px\",\r\n    width: \"20px\",\r\n    textAlign: \"center\",\r\n    padding: \"0\",\r\n  },\r\n  searchBar: {\r\n    position: \"absolute\",\r\n    width: \"90%\",\r\n    top: \"20%\",\r\n    left: \"5%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n  categoriesContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  category: {\r\n    color: \"white\",\r\n    margin: \"4px\",\r\n    fontWeight: 400,\r\n    cursor: \"pointer\",\r\n  },\r\n  autocomplete: {\r\n    position: \"absolute\",\r\n    top: \"120px\",\r\n    maxHeight: \"155px\",\r\n    overflow: \"auto\",\r\n    backgroundColor: \"white\",\r\n    zIndex: 10,\r\n    width: \"50%\",\r\n    listStyleType: \"none\",\r\n    fontSize: \"1rem\",\r\n    padding: 0,\r\n    border: \"1px solid grey\",\r\n    margin: 0,\r\n  },\r\n  list: {\r\n    padding: \"7px 10px\",\r\n    cursor: \"pointer\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#E0E0E0\",\r\n    },\r\n  },\r\n  autoSearchDiv: {\r\n    width: \"50%\",\r\n  },\r\n});\r\n\r\nconst ProductsPage: React.FunctionComponent = _ => {\r\n  const { t } = useResource();\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n  const [searchString, setSearchString] = React.useState(\"\");\r\n  const { isLoading, products } = useSelector((e: RootStateType) => e.products);\r\n  const { categories } = useSelector((e: RootStateType) => e.categories);\r\n  const [categoriesFilter, setCategoriesFilter] = React.useState([\r\n    { categoryID: 5, name: \"#Novinka\" },\r\n    { categoryID: 6, name: \"#Sleva\" },\r\n    // { categoryID: 7, name: \"#MojeOblíbené\" },\r\n    // { categoryID: 8, name: \"#OblíbenéOstatních\" },\r\n  ]);\r\n  const accents = require(\"remove-accents\");\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getProductsAsync.request());\r\n    if (categories.length == 0) {\r\n      dispatch(getCategoriesAsync.request());\r\n    }\r\n  }, [dispatch]);\r\n\r\n  React.useEffect(() => {\r\n    setCategoriesFilter([...categoriesFilter, ...categories]);\r\n  }, [categories]);\r\n\r\n  const searchProducts = (name?: string) => {\r\n    dispatch(\r\n      findProductsAsync.request({\r\n        name: name ? name : searchString,\r\n        filter: null,\r\n      }),\r\n    );\r\n  };\r\n\r\n  const cancelSearch = () => {\r\n    setSearchString(\"\");\r\n    dispatch(getProductsAsync.request());\r\n  };\r\n\r\n  const handleKeyDown = (e: any) => {\r\n    if (e.key === \"Enter\") {\r\n      searchProducts();\r\n    }\r\n  };\r\n\r\n  const filterSearchProducts = (filter: any) => {\r\n    dispatch(findProductsAsync.request({ name: searchString, filter: filter }));\r\n  };\r\n\r\n  return (\r\n    <AuthenticatedLayout title={null}>\r\n      <div className={classes.searchBar}>\r\n        <h2 className={classes.title}>Vyhledejte produkt:</h2>\r\n        <div className={classes.searchContainer}>\r\n          <div className={classes.autoSearchDiv}>\r\n            <TextField\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              id=\"outlined-name\"\r\n              className={classes.input}\r\n              value={searchString}\r\n              onChange={e => setSearchString(e.target.value)}\r\n              onKeyDown={e => handleKeyDown(e)}\r\n            />\r\n            {searchString.length !== 0 ? (\r\n              <>\r\n                <button\r\n                  onClick={() => cancelSearch()}\r\n                  className={classes.clearButton}\r\n                >\r\n                  {\" \"}\r\n                  X\r\n                </button>\r\n                <ul className={classes.autocomplete}>\r\n                  {products\r\n                    .filter(\r\n                      product =>\r\n                        !product.isDeleted &&\r\n                        accents\r\n                          .remove(product.name)\r\n                          .toLowerCase()\r\n                          .includes(accents.remove(searchString).toLowerCase()),\r\n                    )\r\n                    .map(product => {\r\n                      const charIndex = accents\r\n                        .remove(product.name)\r\n                        .toLowerCase()\r\n                        .indexOf(accents.remove(searchString).toLowerCase());\r\n                      const lengthIndex = charIndex + searchString.length;\r\n                      return (\r\n                        <li\r\n                          onClick={() => searchProducts(product.name)}\r\n                          key={product.productID}\r\n                          className={classes.list}\r\n                        >\r\n                          {product.name.slice(0, charIndex)}\r\n                          <b>{product.name.slice(charIndex, lengthIndex)}</b>\r\n                          {product.name.slice(lengthIndex)}\r\n                        </li>\r\n                      );\r\n                    })}\r\n                </ul>\r\n              </>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n\r\n          <button onClick={() => searchProducts()} className={classes.button}>\r\n            Vyhledat\r\n          </button>\r\n        </div>\r\n\r\n        <div className={classes.categoriesContainer}>\r\n          {categoriesFilter.map(c => (\r\n            <h3\r\n              key={c.categoryID}\r\n              onClick={() => filterSearchProducts(c.categoryID)}\r\n              className={classes.category}\r\n            >\r\n              {c.name}\r\n            </h3>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {searchString.length > 0 && products.length < 1\r\n        ? `Produkt ${searchString} nebyl nalezen`\r\n        : \"\"}\r\n\r\n      {!isLoading && (\r\n        <div className={classes.container}>\r\n          {products\r\n            .filter(product => !product.isDeleted)\r\n            .map(product => (\r\n              <ProductItem key={product.productID} product={product} />\r\n            ))}\r\n        </div>\r\n      )}\r\n    </AuthenticatedLayout>\r\n  );\r\n};\r\n\r\nexport { ProductsPage };\r\n","import * as React from \"react\";\nimport { useResource, Resources } from \"Translations/Resources\";\nimport { AuthenticatedLayout } from \"Components/Layout/AuthenticatedLayout\";\nimport { useRouteMatch } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUsersDetailAsync } from \"State/Users/UserReducer\";\nimport { RootStateType } from \"State/Store\";\n\ntype RouteProps = {\n  id: string;\n};\n\ntype Props = {};\n\nconst UserDetailPage: React.FunctionComponent<Props> = props => {\n  const { t } = useResource();\n  const { params } = useRouteMatch<RouteProps>();\n  const userID = Number(params.id);\n  const dispatch = useDispatch();\n  const userDetail = useSelector((e: RootStateType) => e.users.userDetail);\n\n  React.useEffect(() => {\n    dispatch(getUsersDetailAsync.request(userID));\n  }, [userID, dispatch]);\n  console.log(userDetail);\n\n  return (\n    <>\n      <AuthenticatedLayout title={t(Resources.Users.Title)}>\n        Hello {userID}\n      </AuthenticatedLayout>\n    </>\n  );\n};\n\nexport { UserDetailPage };\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableFooter from \"@material-ui/core/TableFooter\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { OrderDTO } from \"../../Api/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport { deleteOrderAsync } from \"../../State/Orders/OrdersReducer\";\r\n\r\ntype Props = {\r\n  orders: OrderDTO[];\r\n  user: any;\r\n  admin: boolean;\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  table: {\r\n    minWidth: 650,\r\n    tableLayout: \"fixed\",\r\n    boxShadow: \"none\",\r\n  },\r\n  tableHeadRow: {\r\n    cursor: \"pointer\",\r\n    borderTop: \"1px solid rgba(224, 224, 224, 1);\",\r\n  },\r\n  tableBodyCell: {\r\n    border: \"none\",\r\n  },\r\n  orangeIcon: {\r\n    color: \"#ff7b00\",\r\n    width: \"25px\",\r\n    height: \"25px\",\r\n    transform: \"scaleX(-1)\",\r\n    marginLeft: theme.spacing(2),\r\n    cursor: \"pointer\",\r\n    paddingBottom: theme.spacing(0.25),\r\n  },\r\n  bold: {\r\n    fontWeight: 600,\r\n  },\r\n  priceColumn: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nconst OrdersTable: React.FunctionComponent<Props> = props => {\r\n  const classes = useStyles();\r\n  const moment = require(\"moment\");\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const deleteIcon = (dateCreated: any, id: any) => {\r\n    const dateNow = moment();\r\n    const hourDif = dateNow.diff(dateCreated, \"hours\");\r\n    \r\n      return (\r\n        <ClearIcon\r\n          onClick={() => deleteHandler(id)}\r\n          className={classes.orangeIcon}\r\n        />\r\n      );\r\n    \r\n  };\r\n\r\n  const deleteHandler = (id: number) => {\r\n    dispatch(deleteOrderAsync.request(id));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <TableContainer>\r\n        <Table className={classes.table}>\r\n          <TableHead>\r\n            <TableRow className={classes.tableHeadRow}>\r\n              <TableCell align=\"center\">Datum</TableCell>\r\n              <TableCell align=\"center\">Čas</TableCell>\r\n              <TableCell align=\"center\">Produkt</TableCell>\r\n              <TableCell align=\"center\">Cena</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {props.orders.map(order => {\r\n              return (\r\n                <TableRow key={order.orderId}>\r\n                  <TableCell className={classes.tableBodyCell} align=\"center\">\r\n                    {moment(order.dateCreated).format(\"DD.MM.YYYY\")}\r\n                  </TableCell>\r\n                  <TableCell className={classes.tableBodyCell} align=\"center\">\r\n                    {moment(order.dateCreated).format(\"HH:mm\")}\r\n                  </TableCell>\r\n                  <TableCell className={classes.tableBodyCell} align=\"center\">\r\n                    {order.name}\r\n                  </TableCell>\r\n                  <TableCell className={classes.tableBodyCell} align=\"center\">\r\n                    <div className={classes.priceColumn}>\r\n                      <p>{order.price} Kč </p>\r\n                      {deleteIcon(order.dateCreated, order.orderId)}\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n            <TableRow className={classes.tableHeadRow}>\r\n              <TableCell\r\n                className={[classes.tableBodyCell, classes.bold].join(\" \")}\r\n                align=\"center\"\r\n              >\r\n                Cena celkem:\r\n              </TableCell>\r\n              <TableCell className={classes.tableBodyCell}> </TableCell>\r\n              <TableCell className={classes.tableBodyCell}> </TableCell>\r\n              <TableCell\r\n                className={[classes.tableBodyCell, classes.bold].join(\" \")}\r\n                align=\"center\"\r\n              >\r\n                {props.orders?.reduce(\r\n                  (accumulator, current) => accumulator + current.price,\r\n                  0,\r\n                )}{\" \"}\r\n                Kč\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { OrdersTable };\r\n","import * as React from \"react\";\r\nimport { AuthenticatedLayout } from \"../../Components/Layout/AuthenticatedLayout\";\r\nimport { useResource, Resources } from \"../../Translations/Resources\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootStateType } from \"../../State/Store\";\r\nimport { getOrdersAsync } from \"../../State/Orders/OrdersReducer\";\r\nimport { GetOrderListQuery } from \"../../Api/Api\";\r\nimport { OrdersTable } from \"./OrdersTable\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\n\r\ntype Props = {\r\n  admin: boolean;\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  table: {\r\n    minWidth: 650,\r\n    tableLayout: \"fixed\",\r\n    boxShadow: \"none\",\r\n  },\r\n  dateBar: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-around\",\r\n    margin: \"auto\",\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(3),\r\n    width: \"50%\",\r\n  },\r\n  dateControl: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-around\",\r\n    width: \"40%\",\r\n  },\r\n}));\r\n\r\nconst OrdersPage: React.FunctionComponent<Props> = props => {\r\n  const { t } = useResource();\r\n  const { isLoading, orders } = useSelector((e: RootStateType) => e.orders);\r\n  const user = useSelector((e: RootStateType) => e.auth.user);\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n\r\n  const [searchDate, setSearchDate] = React.useState<GetOrderListQuery>({\r\n    dateFrom: null,\r\n    dateTo: null,\r\n    allOrders: false,\r\n  });\r\n  const moment = require(\"moment\");\r\n\r\n  const dateSubmitHandler = (e: string, type: string) => {\r\n    const dateInput = moment(e).format(\"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]\");\r\n    if (type === \"dateFrom\") {\r\n      if (\r\n        searchDate.dateTo &&\r\n        moment(searchDate.dateTo).diff(dateInput, \"days\") < 0\r\n      ) {\r\n        setSearchDate({\r\n          ...searchDate,\r\n          dateFrom: searchDate.dateTo,\r\n          dateTo: dateInput,\r\n        });\r\n        return;\r\n      }\r\n      setSearchDate({ ...searchDate, dateFrom: dateInput });\r\n    } else if (type === \"dateTo\") {\r\n      if (\r\n        searchDate.dateFrom &&\r\n        moment(searchDate.dateFrom).diff(dateInput, \"days\") > 0\r\n      ) {\r\n        setSearchDate({\r\n          ...searchDate,\r\n          dateFrom: dateInput,\r\n          dateTo: searchDate.dateFrom,\r\n        });\r\n        return;\r\n      }\r\n      setSearchDate({ ...searchDate, dateTo: dateInput });\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getOrdersAsync.request(searchDate));\r\n  }, [searchDate]);\r\n\r\n  React.useEffect(() => {\r\n    setSearchDate({\r\n      dateFrom: moment()\r\n        .startOf(\"month\")\r\n        .format(\"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]\"),\r\n      dateTo: moment().format(\"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]\"),\r\n      //allOrders: props.admin ? true : false,\r\n      allOrders: false\r\n    });\r\n  }, [props.admin]);\r\n\r\n  return (\r\n    <AuthenticatedLayout\r\n      title={\r\n        props.admin\r\n          ? t(Resources.Orders.AdminTitle)\r\n          : t(Resources.Orders.UserTitle)\r\n      }\r\n    >\r\n      <div className={classes.dateBar}>\r\n        <div className={classes.dateControl}>\r\n          <InputLabel htmlFor=\"dateFrom\">Od</InputLabel>\r\n          <TextField\r\n            id=\"dateFrom\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            type=\"date\"\r\n            value={moment(searchDate.dateFrom).format(\"YYYY-MM-DD\")}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n            onChange={e => dateSubmitHandler(e.target.value, \"dateFrom\")}\r\n          />\r\n        </div>\r\n        <div className={classes.dateControl}>\r\n          <InputLabel htmlFor=\"dateTo\">Do</InputLabel>\r\n          <TextField\r\n            id=\"dateTo\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            type=\"date\"\r\n            value={moment(searchDate.dateTo).format(\"YYYY-MM-DD\")}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n            onChange={e => dateSubmitHandler(e.target.value, \"dateTo\")}\r\n          />\r\n        </div>\r\n      </div>\r\n      {!isLoading && (\r\n        <OrdersTable orders={orders} user={user} admin={props.admin} />\r\n      )}\r\n    </AuthenticatedLayout>\r\n  );\r\n};\r\n\r\nexport { OrdersPage };\r\n","import * as React from \"react\";\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { CssBaseline } from \"@material-ui/core\";\r\n\r\n//https://material-ui.com/styles/advanced/\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiCssBaseline: {\r\n      '@global': {\r\n        html: {\r\n          WebkitFontSmoothing: 'auto',\r\n          height: \"100%\"\r\n        },\r\n        body: {\r\n          height: \"100%\"\r\n        },\r\n        \"@root\": {\r\n          height: \"100%\"\r\n        }\r\n      },\r\n    },\r\n  },\r\n  palette: {\r\n    primary: {\r\n      light: \"#757ce8\",\r\n      main: \"#3f50b5\",\r\n      dark: \"#002884\",\r\n      contrastText: \"#fff\",\r\n    },\r\n    secondary: {\r\n      light: \"#ff7961\",\r\n      main: \"#f44336\",\r\n      dark: \"#ba000d\",\r\n      contrastText: \"#000\",\r\n    },\r\n    background: {\r\n      default: \"white\",\r\n    },\r\n  },\r\n});\r\n\r\nconst Layout: React.FunctionComponent = props => {\r\n  return (\r\n    <>\r\n      <ThemeProvider theme={theme}>\r\n        <CssBaseline />\r\n        {props.children}\r\n      </ThemeProvider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport { Layout };\r\n","import styled from \"styled-components\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst UnstyledLink = styled(Link)`\r\n  text-decoration: inherit;\r\n  color: inherit;\r\n`;\r\n\r\nexport { UnstyledLink };\r\n","import * as React from \"react\";\r\nimport { Layout } from \"Components/Layout/Layout\";\r\nimport { Typography, Button } from \"@material-ui/core\";\r\nimport NotInterestedIcon from \"@material-ui/icons/NotInterested\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport { useResource, Resources } from \"Translations/Resources\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport { UnstyledLink } from \"Components/Routes/UnstyledLink\";\r\n\r\nconst StyledPage = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n`;\r\n\r\nconst StyledIcon = styled(NotInterestedIcon)`\r\n  margin: 20px;\r\n  font-size: 120px;\r\n`;\r\n\r\nconst Error404Page: React.FunctionComponent = _ => {\r\n  const { t } = useResource();\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <Layout>\r\n      <StyledPage>\r\n        <Typography variant=\"h1\">Error404</Typography>\r\n        <Typography variant=\"h2\">{location.pathname}</Typography>\r\n        <Typography variant=\"h2\">\r\n          {t(Resources.Errors.Error404.Subtitle)}\r\n        </Typography>\r\n        <StyledIcon />\r\n        <UnstyledLink to=\"/\">\r\n          <Button\r\n            startIcon={<HomeIcon />}\r\n            size=\"large\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            {t(Resources.Errors.Error404.Home)}\r\n          </Button>\r\n        </UnstyledLink>\r\n      </StyledPage>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport { Error404Page };\r\n","import * as React from \"react\";\r\nimport { Route, Redirect, RouteProps } from \"react-router-dom\";\r\nimport { LoginPage } from \"Components/Auth/Login/LoginPage\";\r\nimport { useResource, Resources } from \"Translations/Resources\";\r\nimport { AuthenticatedRoute } from \"Routes/AuthenticatedRoute\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootStateType } from \"State/Store\";\r\nimport { UsersPage } from \"Components/Users/UsersPage\";\r\nimport { UserLogout } from \"Components/Users/UserLogout\";\r\nimport { ProductsManagePage }  from \"Components/Products/ProductsManagePage\";\r\nimport { ProductsPage } from \"Components/Products/ProductsPage\";\r\nimport { UserDetailPage } from \"Components/Users/UserDetailPage\";\r\nimport { OrdersPage } from \"Components/Orders/OrdersPage\";\r\nimport { Error404Page } from \"Components/Error/Error404Page\";\r\nimport { BrowserRouter as Router, Switch } from \"react-router-dom\";\r\n\r\nconst Routes: React.FunctionComponent<RouteProps> = _ => {\r\n  const { t } = useResource();\r\n  const login = `/${t(Resources.Routes.Login)}`;\r\n  const users = `/${t(Resources.Routes.Users)}`; \r\n  const manageProducts = `/sprava/${t(Resources.Routes.Products)}`;\r\n  const products = `/${t(Resources.Routes.Products)}`;\r\n  const userDetail = `/${t(Resources.Routes.Users)}/${t(Resources.Routes.UserDetail,)}/:id`;\r\n  const userLogout = `/${t(Resources.Routes.LogOut)}`;\r\n  const ordersAdmin = `/${t(Resources.Routes.Orders)}`;\r\n  const ordersUser = `/:id/${t(Resources.Routes.Orders)}`;\r\n\r\n  const user = useSelector((e: RootStateType) => e.auth.user);\r\n\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route path=\"/\" exact={true}>\r\n          <Redirect to={products} />\r\n        </Route>\r\n        <Route path={login}>\r\n          <LoginPage />\r\n        </Route>\r\n        <Route user={user} path={userDetail}>\r\n          <UserDetailPage />\r\n        </Route>\r\n        <Route exact={true} user={user} path={users}>\r\n          <UsersPage />\r\n        </Route>\r\n        <AuthenticatedRoute exact={true} user={user?.role === \"Admin\" ? user : null} path={manageProducts}>\r\n          <ProductsManagePage />\r\n        </AuthenticatedRoute>\r\n\r\n        <AuthenticatedRoute exact={true} user={user} path={userLogout} >\r\n          <UserLogout />\r\n        </AuthenticatedRoute>\r\n\r\n        <Route exact={true} user={user} path={products}>\r\n          <ProductsPage />\r\n        </Route>\r\n\r\n        <AuthenticatedRoute exact={true} user={user?.role === \"Admin\" ? user : null} path={ordersAdmin}>\r\n          <OrdersPage admin={true} />\r\n        </AuthenticatedRoute>\r\n\r\n        <AuthenticatedRoute exact={true} user={user} path={ordersUser}>\r\n          <OrdersPage admin={false} />\r\n        </AuthenticatedRoute>\r\n\r\n        <Route>\r\n          <Error404Page />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport { Routes };\r\n","import app from \"./Base\";\r\n\r\n/* eslint-disable */\r\n// THIS FILE WAS GENERATED\r\n// ALL CHANGES WILL BE OVERWRITTEN\r\n\r\n// ARCHITECTURE START\r\n  type FetchResponse<T> = {\r\n    json: T;\r\n    status: number;\r\n  };\r\n  \r\n  type Configuration = {\r\n    jwtKey: string | undefined;\r\n    onResponse?: (response: FetchResponse<any>) => void;\r\n  };\r\n  \r\n  let CONFIG: Configuration = {\r\n    jwtKey: undefined,\r\n    onResponse: () => {},\r\n  };\r\n  \r\n  export function configureApiCalls(configuration: Configuration) {\r\n    CONFIG = { ...CONFIG, ...configuration };\r\n  }\r\n  \r\n  async function fetchJson<T>(...args: any): Promise<FetchResponse<T>> {\r\n    const res: Response = await (fetch as any)(...args);\r\n    try{\r\n      const json = await res.json();\r\n      const response = { json: json, status: res.status };\r\n      CONFIG.onResponse && CONFIG.onResponse(response);\r\n      return response;\r\n    }\r\n    catch{\r\n      const errorResponse = { status: res.status, json: null as any };\r\n      CONFIG.onResponse && CONFIG.onResponse(errorResponse);\r\n      return errorResponse;\r\n    }\r\n  }\r\n  \r\n  const updateHeaders = (headers: Headers) => {\r\n    if (!headers.has(\"Content-Type\")) {\r\n      headers.append(\"Content-Type\", \"application/json\");\r\n    }\r\n    // const token = CONFIG.jwtKey\r\n    //   ? localStorage.getItem(CONFIG.jwtKey as any)\r\n    //   : undefined;\r\n    // if (!headers.has(\"Authorization\") && token) {\r\n    //   headers.append(\"Authorization\", token);\r\n    // }\r\n  };\r\n\r\nfunction apiPost<TResponse, TRequest>(\r\n  url: string,\r\n  request: TRequest,\r\n  headers: Headers\r\n) {\r\n  var raw = JSON.stringify(request);\r\n  updateHeaders(headers);\r\n  var requestOptions = {\r\n    method: \"POST\",\r\n    headers,\r\n    body: raw,\r\n    redirect: \"follow\",\r\n  };\r\n\r\n  return fetchJson<TResponse>(url, requestOptions as any);\r\n}\r\n\r\ntype ParamsObject = {\r\n  [key: string]: any;\r\n};\r\n\r\nfunction apiGet<TResponse>(\r\n  url: string,\r\n  headers: Headers,\r\n  paramsObject: ParamsObject = {}\r\n) {\r\n  updateHeaders(headers);\r\n  const queryString = Object.entries(paramsObject)\r\n    .map(([key, val]) => `${key}=${val}`)\r\n    .join(\"&\");\r\n  const maybeQueryString = queryString.length > 0 ? `?${queryString}` : \"\";\r\n  const requestOptions = {\r\n    method: \"GET\",\r\n    headers,\r\n    redirect: \"follow\",\r\n  };\r\n  return fetchJson<TResponse>(`${url}${maybeQueryString}`, requestOptions);\r\n}\r\n\r\nfunction apiPut<TResponse, TRequest>(\r\n  url: string,\r\n  request: TRequest,\r\n  headers: Headers\r\n) {\r\n  updateHeaders(headers);\r\n\r\n  var raw = JSON.stringify(request);\r\n\r\n  var requestOptions = {\r\n    method: \"PUT\",\r\n    headers,\r\n    body: raw,\r\n    redirect: \"follow\",\r\n  };\r\n\r\n  return fetchJson<TResponse>(url, requestOptions as any);\r\n}\r\n\r\nfunction apiDelete<TResponse>(\r\n  url: string,\r\n  headers: Headers,\r\n  paramsObject: ParamsObject = {}\r\n) {\r\n  updateHeaders(headers);\r\n  const queryString = Object.entries(paramsObject)\r\n    .map(([key, val]) => `${key}=${val}`)\r\n    .join(\"&\");\r\n  const maybeQueryString = queryString.length > 0 ? `?${queryString}` : \"\";\r\n\r\n  var requestOptions = {\r\n    method: \"DELETE\",\r\n    headers,\r\n    redirect: \"follow\",\r\n  };\r\n  return fetchJson<TResponse>(`${url}${maybeQueryString}`, requestOptions);\r\n}\r\n// ARCHITECTURE END\r\n\r\nexport const API_ROUTES = { \r\n\tpostAuthLogin: \"/api/Auth/login\",\r\n\tpostAuthSsoLogin: \"/api/Auth/sso-login\",\r\n\tpostCacheClear: \"/api/Cache/Clear\",\r\n\tgetCategoriesList: \"/api/Categories/list\",\r\n\tgetHome: \"/api/home\",\r\n\tpostLogError: \"/api/Log/Error\",\r\n\tdeleteOrdersId: \"/api/Orders\",\r\n\tpostOrders: \"/api/Orders\",\r\n\tpostOrdersList: \"/api/Orders/list\",\r\n\tgetProductsId: \"/api/Products\",\r\n\tdeleteProductsId: \"/api/Products\",\r\n\tgetProductsList: \"/api/Products/list\",\r\n\tpostProductsSearch: \"/api/Products/search\",\r\n\tpostProducts: \"/api/Products\",\r\n\tputProducts: \"/api/Products\",\r\n\tpostResourcesResources: \"/api/Resources/Resources\",\r\n\tpostResourcesCreate: \"/api/Resources/Create\",\r\n\tgetSecuritySwitchUser: \"/api/Security/switch-user\",\r\n\tgetUsersList: \"/api/Users/list\",\r\n\tgetUsersId: \"/api/Users\",\r\n\tdeleteUsersId: \"/api/Users\",\r\n\tputUsers: \"/api/Users\"\r\n}\r\n\r\nexport interface AuthRequest {\r\n\tlogin: string;\r\n\tpassword: string;\r\n}\r\n\r\nexport enum Role {\r\n\tUser = \"User\",\r\n\tAdmin = \"Admin\"\r\n}\r\n\r\nexport enum AuthError {\r\n\tGoogleAuth = \"GoogleAuth\",\r\n\tApplicationVerification = \"ApplicationVerification\",\r\n\tUserNotFound = \"UserNotFound\"\r\n}\r\n\r\n\r\nexport interface AuthResult {\r\n\tisSuccessful: boolean;\r\n\tkind: string;\r\n\tlocalId: string;\r\n\temail: string;\r\n\tdisplayName: string;\r\n\tidToken: string;\r\n\tregistered: boolean;\r\n\terror: AuthError;\r\n \terrorMessage: string;\r\n}\r\n\r\nexport interface ProblemDetails {\r\n\ttype: string;\r\n\ttitle: string;\r\n\tstatus?: number;\r\n\tdetail: string;\r\n\tinstance: string;\r\n\textensions?: unknown;\r\n}\r\n\r\nexport enum UserOriginDto {\r\n\tGoogle = \"Google\"\r\n}\r\n\r\nexport interface SsoAuthRequest {\r\n\temail: string;\r\n\ttoken: string;\r\n\tuserOrigin: UserOriginDto;\r\n}\r\n\r\nexport interface CategoryDTO {\r\n\tcategoryID: any;\r\n\tname: string;\r\n}\r\n\r\nexport interface WebLogRequest {\r\n\tdateCreated: string;\r\n\terror: string;\r\n\tadditionalInfo: string;\r\n\treduxState: string;\r\n}\r\n\r\nexport interface WebLogRequestBatch {\r\n\tdateCreated: string;\r\n\twebLogRequests?: WebLogRequest[];\r\n}\r\n\r\nexport interface ValidationMessage {\r\n\tfield: string;\r\n\tmessage: string;\r\n}\r\n\r\nexport interface BooleanResult {\r\n\tdata: boolean;\r\n\tisValid: boolean;\r\n\tvalidationErrors?: ValidationMessage[];\r\n}\r\n\r\nexport interface OrderDTO {\r\n\torderId?: any;\r\n\tdateCreated?: string | null;\r\n\tname: string;\r\n\tprice: number;\r\n\tuserId?: number;\r\n\tproductId: any;\r\n}\r\n\r\nexport interface GetOrderListQuery {\r\n\tallOrders: boolean;\r\n\tuserID?: number;\r\n\tdateFrom?: string | null;\r\n\tdateTo?: string | null;\r\n}\r\n\r\nexport interface ProductDto {\r\n\tproductID: any;\r\n\tcreatedBy: number;\r\n\tupdatedBy: number;\r\n\tisDeleted: boolean;\r\n\tname: string;\r\n\tprice: number;\r\n\tquantity: number;\r\n\timageURL: string;\r\n\timage: any;\r\n\tdiscountPrice?: number;\r\n\tisNew?: boolean;\r\n\tcategoryID?: number;\r\n}\r\n\r\nexport interface Result {\r\n\tisValid: boolean;\r\n\tvalidationErrors?: ValidationMessage[];\r\n}\r\n\r\nexport interface ProductSearchFilter {\r\n\tname: string | null; \r\n\tfilter?: any | null;\r\n}\r\n\r\nexport interface ResourceFilter {\r\n\tlanguageCode: string;\r\n}\r\n\r\nexport interface ResourceDto {\r\n\tresourceCode: string;\r\n\tlanguageCode: string;\r\n\tvalue: string;\r\n}\r\n\r\nexport interface UserDto {\r\n\tuserID: number;\r\n\tlogin: string;\r\n\tfirstName: string;\r\n\tlastName: string;\r\n\trole: Role;\r\n}\r\n\r\nexport interface UserUpdateRequest {\r\n\tuserID: number;\r\n\tfirstName: string;\r\n\tlastName: string;\r\n}\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL;\r\nconst FIREBASE_URL = \"https://ecommerce-39eef-default-rtdb.firebaseio.com\";\r\n\r\nexport const postAuthLogin = (requestContract: AuthRequest, headers = new Headers()): \r\n\tPromise<FetchResponse<AuthResult>> => {\r\n\tconsole.log(requestContract);\r\n\tlet apikey = process.env.REACT_APP_FIREBASE_KEY;\r\n\tlet query = {\r\n\t\temail: requestContract.login,\r\n\t\tpassword: requestContract.password\r\n\t}\r\n\tlet url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apikey}`\r\n\treturn apiPost(url, query, headers);\r\n}\r\n\r\nexport const postAuthSignUp = (requestContract: AuthRequest, headers = new Headers()):\r\n\tPromise<FetchResponse<AuthResult>> => {\r\n\tlet apikey = process.env.REACT_APP_FIREBASE_KEY;\r\n\tlet query = {\r\n\t\temail: requestContract.login,\r\n\t\tpassword: requestContract.password\r\n\t}\r\n\tlet url = `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${apikey}`\r\n\treturn apiPost(url, query, headers);\r\n}\r\n\r\nexport const postAuthSsoLogin = (requestContract: SsoAuthRequest, headers = new Headers()): \r\n\tPromise<FetchResponse<AuthResult>> => \r\n\tapiPost(`${API_URL}/api/Auth/sso-login`, requestContract, headers);\r\n\r\nexport const postCacheClear = (headers = new Headers()): \r\n\tPromise<FetchResponse<any>> => \r\n\tapiPost(`${API_URL}/api/Cache/Clear`, {}, headers);\r\n\r\nexport const getCategoriesList = (headers = new Headers()): \r\n\tPromise<FetchResponse<CategoryDTO[]>> => {\r\n\t\tlet url = `${FIREBASE_URL}/categories.json`\r\n\t\treturn apiGet(url, headers, {});\r\n}\r\n\r\nexport const getHome = (headers = new Headers()): \r\n\tPromise<FetchResponse<any>> => {\r\n\treturn apiGet(`${API_URL}/api/home`, headers, {});\r\n}\r\n\r\nexport const postLogError = (requestContract: WebLogRequestBatch, headers = new Headers()): \r\n\tPromise<FetchResponse<any>> => \r\n\tapiPost(`${API_URL}/api/Log/Error`, requestContract, headers);\r\n\r\nexport const deleteOrdersId = (id: any, headers = new Headers()): \r\n\tPromise<FetchResponse<BooleanResult>> => {\r\n\t\tconst userID = localStorage.getItem(\"jwtToken\");\r\n\t\tlet url = `${FIREBASE_URL}/orders/${userID}/${id}.json`\r\n\r\n\t\treturn apiDelete(url, headers, {});\r\n}\r\n\r\nexport const postOrders = (requestContract: OrderDTO, headers = new Headers()): \r\n\tPromise<FetchResponse<OrderDTO>> =>\r\n\t{\r\n\t\tconst userID = localStorage.getItem(\"jwtToken\");\r\n\t\tlet url = `${FIREBASE_URL}/orders/${userID}.json`\r\n\t\treturn apiPost(url, requestContract, headers);\r\n\t}\r\n\r\nexport const postOrdersList = (requestContract: GetOrderListQuery, headers = new Headers()): \r\n\tPromise<FetchResponse<OrderDTO[]>> => {\r\n\t\tlet url = '';\r\n\t\tconst userID = localStorage.getItem(\"jwtToken\");\r\n\r\n\t\tif (!requestContract.allOrders) {\r\n\t\t\turl = `${FIREBASE_URL}/orders/${userID}.json`\r\n\t\t} else {\r\n\t\t\turl = `${FIREBASE_URL}/orders.json`\r\n\t\t}\r\n\t\treturn apiGet(url, headers, {});\r\n\t}\r\n\r\nexport const getProductsId = (id: number, headers = new Headers()): \r\n\tPromise<FetchResponse<ProductDto>> => {\r\n\treturn apiGet(`${API_URL}/api/Products/${id}`, headers, {});\r\n}\r\n\r\nexport const deleteProductsId = (id: any, headers = new Headers()): \r\n\tPromise<FetchResponse<Result>> => {\r\n\tlet url = `${FIREBASE_URL}/products/${id}.json`\r\n\treturn apiDelete(url, headers, {});\r\n}\r\n\r\nexport const getProductsList = (headers = new Headers()): \r\n\tPromise<FetchResponse<ProductDto[]>> => {\r\n\tlet url = `${FIREBASE_URL}/products.json`\r\n\treturn apiGet(url, headers, {});\r\n}\r\n\r\nexport const postProductsSearch = (requestContract: ProductSearchFilter, headers = new Headers()): \r\n\tPromise<FetchResponse<ProductDto[]>> => \r\n\t{\r\n\t\tlet url = '';\r\n\t\tif (requestContract.filter == null) {\r\n\t\t\turl = `${FIREBASE_URL}/products.json?orderBy=\"name\"&startAt=\"${requestContract.name}\"&endAt=\"${requestContract.name}\\uf8ff\"`\r\n\t\t} else {\r\n\t\t\tconsole.log(requestContract.filter);\r\n\t\t\turl = `${FIREBASE_URL}/products.json?orderBy=\"categoryID\"&startAt=\"${requestContract.filter}\"&endAt=\"${requestContract.filter}\\uf8ff\"`\r\n\t\t}\r\n\t\t\r\n\t\treturn apiGet(url, headers, {});\r\n\t}\r\n\r\nexport const postProducts = (requestContract: any, headers = new Headers()): \r\n\tPromise<FetchResponse<ProductDto>> => \r\n\t{\r\n\t\tlet url = `${FIREBASE_URL}/products.json`\r\n\t\treturn apiPost(url, requestContract, headers);\r\n\t}\r\n\r\nexport const putProducts = (requestContract: any, headers = new Headers()): \r\n\tPromise<FetchResponse<ProductDto>> => \r\n\t{\r\n\t\tlet productID = requestContract.productID;\r\n\t\tlet url = `${FIREBASE_URL}/products/${productID}.json`\r\n\t\treturn apiPut(url, requestContract, headers);\r\n\t}\r\n\r\nexport const postResourcesResources = (requestContract: ResourceFilter, headers = new Headers()): \r\n\tPromise<FetchResponse<any>> => \r\n\tapiPost(`${API_URL}/api/Resources/Resources`, requestContract, headers);\r\n\r\nexport const postResourcesCreate = (requestContract: ResourceDto, headers = new Headers()): \r\n\tPromise<FetchResponse<any>> => \r\n\tapiPost(`${API_URL}/api/Resources/Create`, requestContract, headers);\r\n\r\nexport const getSecuritySwitchUser = (userID: number, headers = new Headers()): \r\n\tPromise<FetchResponse<any>> => {\r\n\tconst queryParams = {\r\n\t\tuserID\r\n\t}\r\n\treturn apiGet(`${API_URL}/api/Security/switch-user`, headers, queryParams);\r\n}\r\n\r\nexport const getUsersList = (headers = new Headers()): \r\n\tPromise<FetchResponse<UserDto[]>> => {\r\n\treturn apiGet(`${API_URL}/api/Users/list`, headers, {});\r\n}\r\n\r\nexport const getUsersId = (id: number, headers = new Headers()): \r\n\tPromise<FetchResponse<UserDto>> => {\r\n\treturn apiGet(`${API_URL}/api/Users/${id}`, headers, {});\r\n}\r\n\r\nexport const deleteUsersId = (id: number, headers = new Headers()): \r\n\tPromise<FetchResponse<Result>> => {\r\n\treturn apiDelete(`${API_URL}/api/Users/${id}`, headers, {});\r\n}\r\n\r\nexport const putUsers = (requestContract: UserUpdateRequest, headers = new Headers()): \r\n\tPromise<FetchResponse<UserDto>> => \r\n\tapiPut(`${API_URL}/api/Users`, requestContract, headers);\r\n\r\nexport const API = { \r\n\tpostAuthLogin,\r\n\tpostAuthSsoLogin,\r\n\tpostCacheClear,\r\n\tgetCategoriesList,\r\n\tgetHome,\r\n\tpostLogError,\r\n\tdeleteOrdersId,\r\n\tpostOrders,\r\n\tpostOrdersList,\r\n\tgetProductsId,\r\n\tdeleteProductsId,\r\n\tgetProductsList,\r\n\tpostProductsSearch,\r\n\tpostProducts,\r\n\tputProducts,\r\n\tpostResourcesResources,\r\n\tpostResourcesCreate,\r\n\tgetSecuritySwitchUser,\r\n\tgetUsersList,\r\n\tgetUsersId,\r\n\tdeleteUsersId,\r\n\tputUsers\r\n}\r\n\r\n","import { loginUserAsync, signUpUserAsync } from \"./AuthReducer\";\r\nimport { put, takeLatest } from \"redux-saga/effects\";\r\nimport { postAuthLogin, postAuthSignUp } from \"Api/Api\";\r\nimport { getType } from \"typesafe-actions\";\r\nimport { call } from \"typed-redux-saga\";\r\n\r\nfunction* loginUser(\r\n  action: ReturnType<typeof loginUserAsync.request>,\r\n): Generator {\r\n  try {\r\n    const response = yield* call(postAuthLogin, action.payload);\r\n    if (response.status === 200) {\r\n      localStorage.setItem(\"jwtToken\", `${response.json.localId}`);\r\n      yield put(loginUserAsync.success(response.json));\r\n    } else {\r\n      yield put(loginUserAsync.failure(new Error(response.json.errorMessage)));\r\n    }\r\n  } catch (err) {\r\n    yield put(loginUserAsync.failure(err));\r\n  }\r\n}\r\nexport function* loginUserSaga() {\r\n  yield takeLatest(getType(loginUserAsync.request), loginUser);\r\n}\r\n\r\nfunction* signUpUser(\r\n  action: ReturnType<typeof signUpUserAsync.request>,\r\n): Generator {\r\n  try {\r\n    const response = yield* call(postAuthSignUp, action.payload);\r\n    if (response.status === 200) {\r\n      localStorage.setItem(\"jwtToken\", `Bearer ${response.json.idToken}`);\r\n      yield put(signUpUserAsync.success(response.json));\r\n    } else {\r\n      yield put(signUpUserAsync.failure(new Error(response.json.errorMessage)));\r\n    }\r\n  } catch (err) {\r\n    yield put(signUpUserAsync.failure(err));\r\n  }\r\n}\r\nexport function* signUpUserSaga() {\r\n  yield takeLatest(getType(signUpUserAsync.request), signUpUser);\r\n}\r\n","import { deleteUsersId, getUsersId, getUsersList } from \"Api/Api\";\r\nimport { put, takeLatest } from \"redux-saga/effects\";\r\nimport { call } from \"typed-redux-saga\";\r\nimport { getType } from \"typesafe-actions\";\r\nimport {\r\n  deleteUsersAsync, getUsersAsync,\r\n  getUsersDetailAsync\r\n} from \"./UserReducer\";\r\n\r\nfunction* getUsers(): Generator {\r\n  try {\r\n    const response = yield* call(getUsersList);\r\n    if (response.status === 200) {\r\n      yield put(getUsersAsync.success(response.json));\r\n    } else {\r\n      yield put(getUsersAsync.failure(new Error()));\r\n    }\r\n  } catch (err) {\r\n    yield put(getUsersAsync.failure(err));\r\n  }\r\n}\r\nexport function* getUsersSaga() {\r\n  yield takeLatest(getType(getUsersAsync.request), getUsers);\r\n}\r\n\r\nfunction* getUserDetail(\r\n  action: ReturnType<typeof getUsersDetailAsync.request>,\r\n): Generator {\r\n  try {\r\n    const response = yield* call(getUsersId, action.payload);\r\n    if (response.status === 200) {\r\n      yield put(getUsersDetailAsync.success(response.json));\r\n    } else {\r\n      yield put(getUsersDetailAsync.failure(new Error()));\r\n    }\r\n  } catch (err) {\r\n    yield put(getUsersDetailAsync.failure(err));\r\n  }\r\n}\r\nexport function* getUserDetailSaga() {\r\n  yield takeLatest(getType(getUsersDetailAsync.request), getUserDetail);\r\n}\r\n\r\nfunction* deleteUser(\r\n  action: ReturnType<typeof deleteUsersAsync.request>,\r\n): Generator {\r\n  try {\r\n    const response = yield* call(deleteUsersId, action.payload);\r\n    if (response.status === 200) {\r\n      yield put(deleteUsersAsync.success(response.json));\r\n    } else {\r\n      yield put(deleteUsersAsync.failure(new Error()));\r\n    }\r\n  } catch (err) {\r\n    yield put(deleteUsersAsync.failure(err));\r\n  }\r\n}\r\nexport function* deleteUserSaga() {\r\n  yield takeLatest(getType(getUsersDetailAsync.request), deleteUser);\r\n}\r\n","import { debounce } from \"lodash\";\r\nimport { postLogError, WebLogRequest } from \"Api/Api\";\r\n\r\ntype WindowWithErrorStack = {\r\n  applicationErrorStack: WebLogRequest[];\r\n  applicationStore: any;\r\n};\r\n\r\nconst logStorage = (window as unknown) as WindowWithErrorStack;\r\n\r\nconst logToApi = () => {\r\n  console.log(logStorage.applicationErrorStack);\r\n  postLogError({\r\n    webLogRequests: logStorage.applicationErrorStack,\r\n    dateCreated: new Date().toISOString(),\r\n  });\r\n  logStorage.applicationErrorStack = [];\r\n};\r\n\r\nconst logToApiDebounced = debounce(logToApi, 1000);\r\n\r\nconst logError = (error?: Error, additionalInfo?: any) => {\r\n  if (error || additionalInfo) {\r\n    const errorLog: WebLogRequest = {\r\n      dateCreated: new Date().toISOString(),\r\n      error: `${\r\n        error?.message\r\n      } || ${error?.message.toString()} || ${error?.stack?.toString()} `,\r\n      additionalInfo: JSON.stringify(additionalInfo || {}),\r\n      reduxState: JSON.stringify(logStorage.applicationStore?.getState() || {}),\r\n    };\r\n    logStorage.applicationErrorStack = logStorage.applicationErrorStack || [];\r\n    logStorage.applicationErrorStack.push(errorLog);\r\n    logToApiDebounced();\r\n  }\r\n};\r\n\r\nexport { logError };\r\n","import { getProductsList, deleteProductsId, postProductsSearch, postProducts, putProducts} from \"../../Api/Api\";\r\nimport { put, takeLatest } from \"redux-saga/effects\";\r\nimport { call } from \"typed-redux-saga\";\r\nimport { getType } from \"typesafe-actions\";\r\nimport {\r\n    getProductsAsync, postProductAsync, deleteProductAsync, editProductAsync, findProductsAsync, buyProductSync\r\n} from \"./ProductsReducer\";\r\nimport { ProductDto } from \"Api/Api\";\r\nimport db from \"../../Api/Base\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL;\r\nconst PROJECT_ID = process.env.REACT_APP_FIREBASE_PROJECT_ID;\r\n\r\nfunction* getProducts(): Generator {\r\n    try {\r\n      const response = yield* call(getProductsList);\r\n      if (response.status === 200) {\r\n        yield put(getProductsAsync.success(response.json));\r\n      } else {\r\n        yield put(getProductsAsync.failure(new Error()));\r\n      }\r\n    } catch (err) {\r\n      yield put(getProductsAsync.failure(err));\r\n    }\r\n  }\r\n\r\nexport function* getProductsSaga() {\r\n    yield takeLatest(getType(getProductsAsync.request), getProducts);\r\n  }\r\n\r\nfunction* postProduct(\r\n  action: ReturnType<typeof postProductAsync.request>,\r\n): Generator {\r\n  try {\r\n    const response = yield* call(postProducts, action.payload);\r\n    if (response.status === 200) {\r\n      yield put(postProductAsync.success(response.json));\r\n    } else {\r\n      yield put(postProductAsync.failure(new Error()));\r\n    }\r\n  } catch (err) {\r\n    yield put(postProductAsync.failure(err));\r\n  }\r\n}\r\n\r\nexport function* postProductSaga() {\r\n  yield takeLatest(getType(postProductAsync.request), postProduct);\r\n}\r\n\r\nexport function* updateProductSaga() {\r\n  yield takeLatest(getType(postProductAsync.success), getProducts);\r\n}\r\n\r\nfunction* deleteProduct(\r\n    action: ReturnType<typeof deleteProductAsync.request>,\r\n  ): Generator {\r\n    try {\r\n      const response = yield* call(deleteProductsId, action.payload);\r\n      if (response.status === 200) {\r\n        yield put(deleteProductAsync.success(action.payload));\r\n      } else {\r\n        yield put(deleteProductAsync.failure(new Error()));\r\n      }\r\n    } catch (err) {\r\n      yield put(deleteProductAsync.failure(err));\r\n    }\r\n  }\r\nexport function* deleteProductSaga() {\r\n    yield takeLatest(getType(deleteProductAsync.request), deleteProduct);\r\n  }\r\n\r\nfunction* editProduct(\r\n    action: ReturnType<typeof editProductAsync.request>,\r\n  ): Generator {\r\n    try {\r\n      const response = yield* call(putProducts, action.payload);\r\n      if (response.status === 200) {\r\n        yield put(editProductAsync.success(response.json));\r\n      } else {\r\n        yield put(editProductAsync.failure(new Error()));\r\n      }\r\n    } catch (err) {\r\n      yield put(editProductAsync.failure(err));\r\n    }\r\n  }\r\n\r\nexport function* editProductSaga() {\r\n    yield takeLatest(getType(editProductAsync.request), editProduct);\r\n  }\r\n\r\nfunction* findProducts(\r\n  action: ReturnType<typeof findProductsAsync.request>\r\n): Generator {\r\n    try {\r\n      const response = yield* call(postProductsSearch, action.payload);\r\n      if (response.status === 200) {\r\n        yield put(findProductsAsync.success(response.json));\r\n      } else {\r\n        yield put(findProductsAsync.failure(new Error()));\r\n      }\r\n    } catch (err) {\r\n      yield put(findProductsAsync.failure(err));\r\n    }\r\n  }\r\n\r\nexport function* findProductsSaga() {\r\n    yield takeLatest(getType(findProductsAsync.request), findProducts);\r\n  }\r\n\r\n\r\n","import { postOrdersList, deleteOrdersId, postOrders, OrderDTO} from \"../../Api/Api\";\r\nimport { put, takeLatest } from \"redux-saga/effects\";\r\nimport { call } from \"typed-redux-saga\";\r\nimport { getType } from \"typesafe-actions\";\r\nimport {\r\n    getOrdersAsync, postOrderAsync, deleteOrderAsync,\r\n} from \"./OrdersReducer\";\r\nimport { buyProductSync } from \"State/Products/ProductsReducer\";\r\n\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL;\r\n\r\nfunction* getOrders(\r\n    action: ReturnType<typeof getOrdersAsync.request>,\r\n): Generator {\r\n    try {\r\n      const response = yield* call(postOrdersList, action.payload);\r\n      if (response.status === 200) {\r\n        let newOrders = [];\r\n        const orders = response.json;\r\n        \r\n          for (const key in orders) {\r\n            if (!action.payload.allOrders) {\r\n              let newOrder = orders[key];\r\n              newOrder.orderId = key;\r\n              newOrders.push(newOrder);\r\n            } else {\r\n              for (const ord in orders[key]) {\r\n                console.log(ord);\r\n              }\r\n            }\r\n          }\r\n        \r\n        yield put(getOrdersAsync.success(newOrders));\r\n      } else {\r\n        yield put(getOrdersAsync.failure(new Error()));\r\n      }\r\n    } catch (err) {\r\n      yield put(getOrdersAsync.failure(err));\r\n    }\r\n  }\r\n\r\nexport function* getOrdersSaga() {\r\n    yield takeLatest(getType(getOrdersAsync.request), getOrders);\r\n  }\r\n\r\nfunction* postOrder(\r\n  action: ReturnType<typeof postOrderAsync.request>,\r\n): Generator {\r\n  try {\r\n   // const token = localStorage.getItem(\"jwtToken\")\r\n    const response = yield* call(postOrders, action.payload);\r\n    if (response.status === 200) {\r\n      yield put(postOrderAsync.success(response.json));\r\n    } else {\r\n      yield put(postOrderAsync.failure(new Error()));\r\n    }\r\n  } catch (err) {\r\n    yield put(postOrderAsync.failure(err));\r\n  }\r\n}\r\n\r\nexport function* postOrderSaga() {\r\n  yield takeLatest(getType(postOrderAsync.request), postOrder);\r\n}\r\n\r\nfunction* deleteOrder(\r\n    action: ReturnType<typeof deleteOrderAsync.request>,\r\n  ): Generator {\r\n    try {\r\n      const response = yield* call(deleteOrdersId, action.payload);\r\n      if (response.status === 200) {\r\n        yield put(deleteOrderAsync.success(action.payload));\r\n      } else {\r\n        yield put(deleteOrderAsync.failure(new Error()));\r\n      }\r\n    } catch (err) {\r\n      yield put(deleteOrderAsync.failure(err));\r\n    }\r\n  }\r\nexport function* deleteOrderSaga() {\r\n    yield takeLatest(getType(deleteOrderAsync.request), deleteOrder);\r\n  }\r\n\r\n\r\n\r\n","import { getCategoriesList } from \"../../Api/Api\";\r\nimport { put, takeLatest } from \"redux-saga/effects\";\r\nimport { call } from \"typed-redux-saga\";\r\nimport { getType } from \"typesafe-actions\";\r\nimport { getCategoriesAsync } from \"./CategoriesReducer\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL;\r\n\r\nfunction* getCategories(\r\n  action: ReturnType<typeof getCategoriesAsync.request>,\r\n): Generator {\r\n  try {\r\n    const response = yield* call(getCategoriesList);\r\n    if (response.status === 200) {\r\n      yield put(getCategoriesAsync.success(response.json));\r\n    } else {\r\n      yield put(getCategoriesAsync.failure(new Error()));\r\n    }\r\n  } catch (err) {\r\n    yield put(getCategoriesAsync.failure(err));\r\n  }\r\n}\r\n\r\nexport function* getCategoriesSaga() {\r\n  yield takeLatest(getType(getCategoriesAsync.request), getCategories);\r\n}\r\n","import { createStore, combineReducers, applyMiddleware } from \"redux\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\nimport { all } from \"@redux-saga/core/effects\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport {\r\n  authReducer,\r\n  AuthAction,\r\n  AuthState,\r\n  resetUser,\r\n} from \"State/Auth/AuthReducer\";\r\nimport { persistStore, persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport { loginUserSaga, signUpUserSaga } from \"./Auth/AuthSaga\";\r\nimport {\r\n  getUsersSaga,\r\n  getUserDetailSaga,\r\n  deleteUserSaga,\r\n} from \"./Users/UserSaga\";\r\nimport { nameof } from \"Utils/ObjectUtils\";\r\nimport { userReducer, UserAction } from \"./Users/UserReducer\";\r\nimport { logError } from \"ErrorService\";\r\nimport { getType } from \"typesafe-actions\";\r\nimport { productsReducer, ProductAction, editProductAsync } from \"./Products/ProductsReducer\";\r\nimport { getProductsSaga, postProductSaga, deleteProductSaga, editProductSaga, findProductsSaga, updateProductSaga } from \"./Products/ProductsSaga\";\r\nimport { ordersReducer, OrderAction } from \"./Orders/OrdersReducer\";\r\nimport { getOrdersSaga, postOrderSaga, deleteOrderSaga } from \"./Orders/OrdersSaga\";\r\nimport { getCategoriesSaga } from \"./Categories/CategoriesSaga\";\r\nimport { postOrdersList } from \"Api/Api\";\r\nimport { categoriesReducer } from \"./Categories/CategoriesReducer\";\r\n\r\nconst authPersistConfig = {\r\n  key: \"auth\",\r\n  storage: storage,\r\n  blacklist: [nameof<AuthState>(\"isLoading\"), nameof<AuthState>(\"errorCode\")],\r\n};\r\n\r\n/**\r\n * Create global state of application\r\n */\r\nconst combinedReducer = combineReducers({\r\n  auth: persistReducer(authPersistConfig, authReducer),\r\n  users: userReducer,\r\n  products: productsReducer,\r\n  orders: ordersReducer,\r\n  categories: categoriesReducer\r\n});\r\n\r\n/**\r\n * Type of global application state\r\n */\r\nexport type RootStateType = ReturnType<typeof combinedReducer>;\r\n\r\n/**\r\n * All changes, that global application state can handle\r\n */\r\nexport type RootActionType = AuthAction | UserAction | ProductAction | OrderAction;\r\n\r\nconst rootReducer = (state: RootStateType, action: RootActionType) => {\r\n  if (action.type === getType(resetUser)) {\r\n    state = (undefined as unknown) as RootStateType;\r\n    /*\r\n      This lines violate redux rules, they are creating effects\r\n      But this is safest way to erase all data\r\n      We are reseting whole application state on logout \r\n    */\r\n    localStorage.clear();\r\n    window.location.reload();\r\n  }\r\n\r\n  return combinedReducer(state, action);\r\n};\r\nconst persistConfig = {\r\n  key: \"root\",\r\n  storage,\r\n  whitelist: [],\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer as any);\r\n\r\nconst sagaMiddleware = createSagaMiddleware({\r\n  onError: (error, errorInfo) => {\r\n    logError(error, errorInfo);\r\n  },\r\n});\r\n\r\nconst middlewares = [sagaMiddleware];\r\n\r\nconst store = createStore(\r\n  persistedReducer,\r\n  composeWithDevTools(applyMiddleware(...middlewares)),\r\n);\r\n\r\nfunction* rootSaga() {\r\n  yield all([\r\n    loginUserSaga(),\r\n    getUsersSaga(),\r\n    getUserDetailSaga(),\r\n    deleteUserSaga(),\r\n    getProductsSaga(),\r\n    postProductSaga(),\r\n    deleteProductSaga(),\r\n    editProductSaga(),\r\n    findProductsSaga(),\r\n    getOrdersSaga(),\r\n    postOrderSaga(),\r\n    deleteOrderSaga(),\r\n    getCategoriesSaga(),\r\n    signUpUserSaga(),\r\n    updateProductSaga()\r\n  ]);\r\n}\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport const useApplicationStore = () => {\r\n  (window as any).applicationStore = store;\r\n  let persistor = persistStore(store as any);\r\n  return { store, persistor };\r\n};\r\n","import * as React from \"react\";\r\nimport { Layout } from \"Components/Layout/Layout\";\r\nimport { Typography, Button } from \"@material-ui/core\";\r\nimport NotInterestedIcon from \"@material-ui/icons/Error\";\r\nimport ErrorIcon from \"@material-ui/icons/Home\";\r\nimport { useResource, Resources } from \"Translations/Resources\";\r\nimport styled from \"styled-components\";\r\n\r\nconst StyledPage = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n`;\r\n\r\nconst StyledIcon = styled(NotInterestedIcon)`\r\n  margin: 20px;\r\n  font-size: 120px;\r\n`;\r\n\r\nconst ApplicationError: React.FunctionComponent = _ => {\r\n  const { t } = useResource();\r\n\r\n  const refresh = () => {\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <StyledPage>\r\n        <Typography variant=\"h1\">\r\n          {t(Resources.Errors.ApplicationError.Title)}\r\n        </Typography>\r\n        <Typography variant=\"h2\">\r\n          {t(Resources.Errors.ApplicationError.Subtitle)}\r\n        </Typography>\r\n        <StyledIcon />\r\n        <Button\r\n          startIcon={<ErrorIcon />}\r\n          size=\"large\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={refresh}\r\n        >\r\n          {t(Resources.Errors.ApplicationError.Home)}\r\n        </Button>\r\n      </StyledPage>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport { ApplicationError };\r\n","import * as React from \"react\";\r\nimport { ApplicationError } from \"Components/Error/ApplicationError\";\r\n\r\ntype State = {\r\n  hasError: boolean;\r\n};\r\n\r\n/**\r\n * This component catches all errors in rendering\r\n */\r\nclass GlobalErrorHandler extends React.Component<{}, State> {\r\n  constructor(props: {}) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  componentDidCatch(error: Error, info: React.ErrorInfo) {\r\n    this.setState({ hasError: true });\r\n    console.log(error, info);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ApplicationError />;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport { GlobalErrorHandler };\r\n","import * as React from \"react\";\r\nimport i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport { CzechResourcesDictionary } from \"Translations/CzechResourcesDictionary\";\r\nimport { Routes } from \"Routes/Routes\";\r\nimport { Layout } from \"Components/Layout/Layout\";\r\nimport { Provider } from \"react-redux\";\r\nimport { useApplicationStore } from \"State/Store\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\nimport { GlobalErrorHandler } from \"Components/Error/GlobalErrorHandler\";\r\nimport { resetUser } from \"State/Auth/AuthReducer\";\r\nimport { configureApiCalls } from \"Api/Api\";\r\n\r\ni18n\r\n  .use(initReactI18next) \r\n  .init({\r\n    resources: {\r\n      cs: CzechResourcesDictionary,\r\n    },\r\n    lng: \"cs\",\r\n    fallbackLng: \"cs\",\r\n\r\n    interpolation: {\r\n      escapeValue: false,\r\n    },\r\n  });\r\n\r\nfunction App() {\r\n  const appStore = useApplicationStore();\r\n  configureApiCalls({\r\n    jwtKey: \"jwtToken\",\r\n    onResponse: r => {\r\n      if (r.status === 401) {\r\n        appStore.store.dispatch(resetUser());\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <Provider store={appStore.store}>\r\n      <PersistGate loading={null} persistor={appStore.persistor}>\r\n        <GlobalErrorHandler>\r\n          <Layout>\r\n            <Routes />\r\n          </Layout>\r\n        </GlobalErrorHandler>\r\n      </PersistGate>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ResourceDictionary } from \"./Resources\";\r\n\r\nexport const CzechResourcesDictionary: ResourceDictionary = {\r\n  Routes: {\r\n    Login: \"prihlaseni\",\r\n    Users: \"uzivatele\",\r\n    UserDetail: \"detail\",\r\n    Products: \"produkty\",\r\n    LogOut: \"odhlaseni\",\r\n    Orders: \"objednavky\"\r\n  },\r\n  Errors: {\r\n    ApplicationError: {\r\n      Title: \"Chyba\",\r\n      Subtitle:\r\n        \"V aplikaci nastala chyba. Opakujte akci později.\",\r\n      Home: \"Domů\",\r\n    },\r\n    Error404: {\r\n      Subtitle: \"Stránka nenalezena\",\r\n      Home: \"Domů\",\r\n    },\r\n  },\r\n  Login: {\r\n    FormTitle: \"Přihlášení\",\r\n    Login: {\r\n      Label: \"Login\",\r\n    },\r\n    Password: {\r\n      Label: \"Heslo\",\r\n    },\r\n    Submit: \"Přihlásit\",\r\n    Error: {\r\n      General: \"Při přihlášení nastala chyba\",\r\n      InvalidLogin: \"Login nebyl nalezen\",\r\n    },\r\n  },\r\n  Dashboard: {\r\n    Title: \"Dashboard\",\r\n    Logout: \"Odhlásit\",\r\n  },\r\n  Users: {\r\n    Title: \"Uživatelé\",\r\n  },\r\n  Validation: {\r\n    Required: \"Pole je povinné\",\r\n    InvalidEmail: \"Email není validní\",\r\n  },\r\n  MenuItems: {\r\n    Login: \"Přihlášení\",\r\n    Users: \"Uživatelé\",\r\n    Products: \"Produkty\",\r\n    ManageProducts: \"Správa produktů\",\r\n    LogOut: \"Odhlásit se\",\r\n    UserOrders: \"Moje objednávky\",\r\n    AdminOrders: \"Všechny objednávky\"\r\n  },\r\n  Products: {\r\n    Title: \"Produkty\"\r\n  },\r\n  Orders: {\r\n    UserTitle: \"Moje objednávky\",\r\n    AdminTitle: \"Všechny objednávky\"\r\n  }\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { logError } from \"ErrorService\";\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\"),\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\nwindow.addEventListener(\"error\", function (event) {\r\n  logError(event.error);\r\n});\r\n"],"sourceRoot":""}